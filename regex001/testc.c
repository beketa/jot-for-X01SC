#include <stdio.h>
#include <tchar.h>
#include <windows.h>
#include "regex.h"

#include <string.h>

#define SLEN(s)  strlen(s)

static int nsucc  = 0;
static int nfail  = 0;
static int nerror = 0;

static FILE* err_file;


static void xx(TCHAR* pattern, TCHAR* str, int from, int to, int mem, int not)
{
	int rc;
	REGE_NFA *nfa;
	REGE_REFER *rf;

	nfa = rege_compile(pattern);
	if (nfa==NULL) {
		_ftprintf(err_file, _T("ERROR: %s\n"),pattern);
		nerror++;
		return ;
	}
	rc = reg_match(nfa, str , &rf, FALSE);

	if (rc == 0) {
		if (not) {
		  _ftprintf(stdout, _T("OK(N): /%s/ '%s'\n"), pattern, str);
		  nsucc++;
		}
		else {
		  _ftprintf(stdout, _T("FAIL: /%s/ '%s'\n"), pattern, str);
		  nfail++;
		}
	}
	else {
		if (not) {
		  _ftprintf(stdout, _T("FAIL(N): /%s/ '%s'\n"), pattern, str);
		  nfail++;
		}
		else {
			if ( rf[mem].st-str == from && rf[mem].en-str == to) {
			_ftprintf(stdout, _T("OK: /%s/ '%s'\n"), pattern, str);
			nsucc++;
		  }
		  else {
			_ftprintf(stdout, _T("FAIL: /%s/ '%s' %d-%d : %d-%d\n"), pattern, str,
				from, to, rf[mem].st-str, rf[mem].en-str);
			nfail++;
		  }
		}
	}
	free_refer(rf);
	free_nfa(nfa);
	rf = NULL;
	nfa = NULL;

}

static void x2(TCHAR* pattern, TCHAR* str, int from, int to)
{
  xx(pattern, str, from, to, 0, 0);
}

static void x3(TCHAR* pattern, TCHAR* str, int from, int to, int mem)
{
  xx(pattern, str, from, to, mem, 0);
}

static void n(TCHAR* pattern, TCHAR* str)
{
  xx(pattern, str, 0, 0, 0, 1);
}

extern int testmain()
{
  err_file = stdout;

  n(_T(""), _T(""));
  n(_T("^"), _T(""));
  n(_T("$"), _T(""));
  //x2(_T("\\G"), _T(""), 0, 0);
  //x2(_T("\\A"), _T(""), 0, 0);
  //x2(_T("\\Z"), _T(""), 0, 0);
  //x2(_T("\\z"), _T(""), 0, 0);
  n(_T("^$"), _T(""));
  //x2(_T("\\ca"), _T("\001"), 0, 1);
  //x2(_T("\\C-b"), _T("\002"), 0, 1);
  //x2(_T("\\c\\\\"), _T("\034"), 0, 1);
  //x2(_T("q[\\c\\\\]"), _T("q\034"), 0, 2);
  x2(_T(""), _T("a"), 0, 0);
  x2(_T("a"), _T("a"), 0, 1);
  x2(_T("\\x61"), _T("a"), 0, 1);
  x2(_T("aa"), _T("aa"), 0, 2);
  x2(_T("aaa"), _T("aaa"), 0, 3);
  x2(_T("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"), _T("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"), 0, 35);
  x2(_T("ab"), _T("ab"), 0, 2);
  x2(_T("b"), _T("ab"), 1, 2);
  x2(_T("bc"), _T("abc"), 1, 3);
//  x2(_T("(?i:#RET#)"), _T("#INS##RET#"), 5, 10);
//  x2(_T("\\17"), _T("\017"), 0, 1);
  x2(_T("\\x1f"), _T("\x1f"), 0, 1);
//  x2(_T("a(?#....\\\\JJJJ)b"), _T("ab"), 0, 2);
//  x2(_T("(?x)  G (o O(?-x)oO) g L"), _T("GoOoOgLe"), 0, 7);
  x2(_T("."), _T("a"), 0, 1);
  n(_T("."), _T(""));
  x2(_T(".."), _T("ab"), 0, 2);
  x2(_T("\\w"), _T("e"), 0, 1);
  n(_T("\\W"), _T("e"));
  x2(_T("\\s"), _T(" "), 0, 1);
  x2(_T("\\S"), _T("b"), 0, 1);
  x2(_T("\\d"), _T("4"), 0, 1);
  n(_T("\\D"), _T("4"));
  //x2(_T("\\b"), _T("z "), 0, 0);
  //x2(_T("\\b"), _T(" z"), 1, 1);
  //x2(_T("\\B"), _T("zz "), 1, 1);
  //x2(_T("\\B"), _T("z "), 2, 2);
  //x2(_T("\\B"), _T(" z"), 0, 0);
  x2(_T("[ab]"), _T("b"), 0, 1);
  n(_T("[ab]"), _T("c"));
  x2(_T("[a-z]"), _T("t"), 0, 1);
  n(_T("[^a]"), _T("a"));
  x2(_T("[^a]"), _T("\n"), 0, 1);
  x2(_T("[]]"), _T("]"), 0, 1);
  n(_T("[^]]"), _T("]"));
//  x2(_T("[\\^]+"), _T("0^^1"), 1, 3);
  x2(_T("[b-]"), _T("b"), 0, 1);
  x2(_T("[b-]"), _T("-"), 0, 1);
  x2(_T("[\\w]"), _T("z"), 0, 1);
  n(_T("[\\w]"), _T(" "));
  x2(_T("[\\W]"), _T("b$"), 1, 2);
  x2(_T("[\\d]"), _T("5"), 0, 1);
  n(_T("[\\d]"), _T("e"));
  x2(_T("[\\D]"), _T("t"), 0, 1);
  n(_T("[\\D]"), _T("3"));
  x2(_T("[\\s]"), _T(" "), 0, 1);
  n(_T("[\\s]"), _T("a"));
  x2(_T("[\\S]"), _T("b"), 0, 1);
  n(_T("[\\S]"), _T(" "));
  x2(_T("[\\w\\d]"), _T("2"), 0, 1);
  n(_T("[\\w\\d]"), _T(" "));
  //x2(_T("[[:upper:]]"), _T("B"), 0, 1);
  //x2(_T("[*[:xdigit:]+]"), _T("+"), 0, 1);
  //x2(_T("[*[:xdigit:]+]"), _T("GHIKK-9+*"), 6, 7);
  //x2(_T("[*[:xdigit:]+]"), _T("-@^+"), 3, 4);
  //n(_T("[[:upper]]"), _T("A"));
  //x2(_T("[[:upper]]"), _T(":"), 0, 1);
  //x2(_T("[\\044-\\047]"), _T("\046"), 0, 1);
  x2(_T("[\\x5a-\\x5c]"), _T("\x5b"), 0, 1);
  x2(_T("[\\x6A-\\x6D]"), _T("\x6c"), 0, 1);
  n(_T("[\\x6A-\\x6D]"), _T("\x6E"));
  n(_T("^[0-9A-F]+ 0+ UNDEF "), _T("75F 00000000 SECT14A notype ()    External    | _rb_apply"));
  x2(_T("[\\[]"), _T("["), 0, 1);
  x2(_T("[\\]]"), _T("]"), 0, 1);
  x2(_T("[&]"), _T("&"), 0, 1);
  //x2(_T("[[ab]]"), _T("b"), 0, 1);
  //x2(_T("[[ab]c]"), _T("c"), 0, 1);
  //n(_T("[[^a]]"), _T("a"));
  //n(_T("[^[a]]"), _T("a"));
  //x2(_T("[[ab]&&bc]"), _T("b"), 0, 1);
  //n(_T("[[ab]&&bc]"), _T("a"));
  //n(_T("[[ab]&&bc]"), _T("c"));
  x2(_T("[a-z&&b-y&&c-x]"), _T("w"), 0, 1);
  n(_T("[^a-z&&b-y&&c-x]"), _T("w"));
  //x2(_T("[[^a&&a]&&a-z]"), _T("b"), 0, 1);
  //n(_T("[[^a&&a]&&a-z]"), _T("a"));
  //x2(_T("[[^a-z&&bcdef]&&[^c-g]]"), _T("h"), 0, 1);
  //n(_T("[[^a-z&&bcdef]&&[^c-g]]"), _T("c"));
  //x2(_T("[^[^abc]&&[^cde]]"), _T("c"), 0, 1);
  //x2(_T("[^[^abc]&&[^cde]]"), _T("e"), 0, 1);
  //n(_T("[^[^abc]&&[^cde]]"), _T("f"));
  x2(_T("[a-&&-a]"), _T("-"), 0, 1);
  x2(_T("[a\\-&&\\-a]"), _T("&"),0,1);
  n(_T("\\wabc"), _T(" abc"));
  x2(_T("a\\Wbc"), _T("a bc"), 0, 4);
  x2(_T("a.b.c"), _T("aabbc"), 0, 5);
  x2(_T(".\\wb\\W..c"), _T("abb bcc"), 0, 7);
  x2(_T("\\s\\wzzz"), _T(" zzzz"), 0, 5);
  x2(_T("aa.b"), _T("aabb"), 0, 4);
  n(_T(".a"), _T("ab"));
  x2(_T(".a"), _T("aa"), 0, 2);
  x2(_T("^a"), _T("a"), 0, 1);
  x2(_T("^a$"), _T("a"), 0, 1);
  x2(_T("^\\w$"), _T("a"), 0, 1);
  n(_T("^\\w$"), _T(" "));
  x2(_T("^\\wab$"), _T("zab"), 0, 3);
  x2(_T("^\\wabcdef$"), _T("zabcdef"), 0, 7);
  x2(_T("^\\w...def$"), _T("zabcdef"), 0, 7);
  x2(_T("\\w\\w\\s\\Waaa\\d"), _T("aa  aaa4"), 0, 8);
  //x2(_T("\\A\\Z"), _T(""), 0, 0);
  //x2(_T("\\Axyz"), _T("xyz"), 0, 3);
  //x2(_T("xyz\\Z"), _T("xyz"), 0, 3);
  //x2(_T("xyz\\z"), _T("xyz"), 0, 3);
  //x2(_T("a\\Z"), _T("a"), 0, 1);
  //x2(_T("\\Gaz"), _T("az"), 0, 2);
  //n(_T("\\Gz"), _T("bza"));
  //n(_T("az\\G"), _T("az"));
  //n(_T("az\\A"), _T("az"));
  //n(_T("a\\Az"), _T("az"));
  x2(_T("\\^\\$"), _T("^$"), 0, 2);
  x2(_T("^x?y"), _T("xy"), 0, 2);
  x2(_T("^(x?y)"), _T("xy"), 0, 2);
  x2(_T("\\w"), _T("_"), 0, 1);
  n(_T("\\W"), _T("_"));
//  x2(_T("(?=z)z"), _T("z"), 0, 1);
//  n(_T("(?=z)."), _T("a"));
//  x2(_T("(?!z)a"), _T("a"), 0, 1);
//  n(_T("(?!z)a"), _T("z"));
//  x2(_T("(?i:a)"), _T("a"), 0, 1);
//  x2(_T("(?i:a)"), _T("A"), 0, 1);
//  x2(_T("(?i:A)"), _T("a"), 0, 1);
//  n(_T("(?i:A)"), _T("b"));
//  x2(_T("(?i:[A-Z])"), _T("a"), 0, 1);
//  x2(_T("(?i:[f-m])"), _T("H"), 0, 1);
//  x2(_T("(?i:[f-m])"), _T("h"), 0, 1);
//  n(_T("(?i:[f-m])"), _T("e"));
//  x2(_T("(?i:[A-c])"), _T("D"), 0, 1);
//  n(_T("(?i:[^a-z])"), _T("A"));
//  n(_T("(?i:[^a-z])"), _T("a"));
//  x2(_T("(?i:[!-k])"), _T("Z"), 0, 1);
//  x2(_T("(?i:[!-k])"), _T("7"), 0, 1);
//  x2(_T("(?i:[T-}])"), _T("b"), 0, 1);
//  x2(_T("(?i:[T-}])"), _T("{"), 0, 1);
//  x2(_T("(?i:\\?a)"), _T("?A"), 0, 2);
//  x2(_T("(?i:\\*A)"), _T("*a"), 0, 2);
  n(_T("."), _T("\n"));
//  x2(_T("(?m:.)"), _T("\n"), 0, 1);
//  x2(_T("(?m:a.)"), _T("a\n"), 0, 2);
//  x2(_T("(?m:.b)"), _T("a\nb"), 1, 3);
  x2(_T(".*abc"), _T("dddabdd\nddabc"), 8, 13);
//  x2(_T("(?m:.*abc)"), _T("dddabddabc"), 0, 10);
//  n(_T("(?i)(?-i)a"), _T("A"));
//  n(_T("(?i)(?-i:a)"), _T("A"));
  n(_T("a?"), _T(""));
  x2(_T("a?"), _T("b"), 0, 0);
  x2(_T("a?"), _T("a"), 0, 1);
  n(_T("a*"), _T(""));
  x2(_T("a*"), _T("a"), 0, 1);
  x2(_T("a*"), _T("aaa"), 0, 3);
  x2(_T("a*"), _T("baaaa"), 0, 0);
  n(_T("a+"), _T(""));
  x2(_T("a+"), _T("a"), 0, 1);
  x2(_T("a+"), _T("aaaa"), 0, 4);
  x2(_T("a+"), _T("aabbb"), 0, 2);
  x2(_T("a+"), _T("baaaa"), 1, 5);
  n(_T(".?"), _T(""));
  x2(_T(".?"), _T("f"), 0, 1);
  x2(_T(".?"), _T("\n"), 0, 0);
  n(_T(".*"), _T(""));
  x2(_T(".*"), _T("abcde"), 0, 5);
  x2(_T(".+"), _T("z"), 0, 1);
  x2(_T(".+"), _T("zdswer\n"), 0, 6);
  //x2(_T("(.*)a\\1f"), _T("babfbac"), 0, 4);
  //x2(_T("(.*)a\\1f"), _T("bacbabf"), 3, 7);
  //x2(_T("((.*)a\\2f)"), _T("bacbabf"), 3, 7);
  //x2(_T("(.*)a\\1f"), _T("baczzzzzz\nbazz\nzzzzbabf"), 19, 23);
  x2(_T("a|b"), _T("a"), 0, 1);
  x2(_T("a|b"), _T("b"), 0, 1);
  x2(_T("|a"), _T("a"), 0, 0);
  x2(_T("(|a)"), _T("a"), 0, 0);
  x2(_T("ab|bc"), _T("ab"), 0, 2);
  x2(_T("ab|bc"), _T("bc"), 0, 2);
//  x2(_T("z(?:ab|bc)"), _T("zbc"), 0, 3);
//  x2(_T("a(?:ab|bc)c"), _T("aabc"), 0, 4);
//  x2(_T("ab|(?:ac|az)"), _T("az"), 0, 2);
  x2(_T("a|b|c"), _T("dc"), 1, 2);
  x2(_T("a|b|cd|efg|h|ijk|lmn|o|pq|rstuvwx|yz"), _T("pqr"), 0, 2);
  n(_T("a|b|cd|efg|h|ijk|lmn|o|pq|rstuvwx|yz"), _T("mn"));
  //x2(_T("a|^z"), _T("ba"), 1, 2);
  x2(_T("a|^z"), _T("za"), 0, 1);
  //x2(_T("a|\\Gz"), _T("bza"), 2, 3);
  //x2(_T("a|\\Gz"), _T("za"), 0, 1);
  //x2(_T("a|\\Az"), _T("bza"), 2, 3);
  //x2(_T("a|\\Az"), _T("za"), 0, 1);
  //x2(_T("a|b\\Z"), _T("ba"), 1, 2);
  //x2(_T("a|b\\Z"), _T("b"), 0, 1);
  //x2(_T("a|b\\z"), _T("ba"), 1, 2);
  //x2(_T("a|b\\z"), _T("b"), 0, 1);
  x2(_T("\\w|\\s"), _T(" "), 0, 1);
  n(_T("\\w|\\w"), _T(" "));
  x2(_T("\\w|%"), _T("%"), 0, 1);
  x2(_T("\\w|[&$]"), _T("&"), 0, 1);
  x2(_T("[b-d]|[^e-z]"), _T("a"), 0, 1);
//  x2(_T("(?:a|[c-f])|bz"), _T("dz"), 0, 1);
//  x2(_T("(?:a|[c-f])|bz"), _T("bz"), 0, 2);
//  x2(_T("abc|(?=zz)..f"), _T("zzf"), 0, 3);
//  x2(_T("abc|(?!zz)..f"), _T("abf"), 0, 3);
//  x2(_T("(?=za)..a|(?=zz)..a"), _T("zza"), 0, 3);
//  n(_T("(?>a|abd)c"), _T("abdc"));
//  x2(_T("(?>abd|a)c"), _T("abdc"), 0, 4);
  x2(_T("a?|b"), _T("a"), 0, 1);
  x2(_T("a?|b"), _T("b"), 0, 0);
  n(_T("a?|b"), _T(""));
  x2(_T("a*|b"), _T("aa"), 0, 2);
  x2(_T("a*|b*"), _T("ba"), 0, 0);
  x2(_T("a*|b*"), _T("ab"), 0, 1);
  n(_T("a+|b*"), _T(""));
  x2(_T("a+|b*"), _T("bbb"), 0, 3);
  x2(_T("a+|b*"), _T("abbb"), 0, 1);
  n(_T("a+|b+"), _T(""));
  x2(_T("(a|b)?"), _T("b"), 0, 1);
  x2(_T("(a|b)*"), _T("ba"), 0, 2);
  x2(_T("(a|b)+"), _T("bab"), 0, 3);
  x2(_T("(ab|ca)+"), _T("caabbc"), 0, 4);
  x2(_T("(ab|ca)+"), _T("aabca"), 1, 5);
  x2(_T("(ab|ca)+"), _T("abzca"), 0, 2);
  x2(_T("(a|bab)+"), _T("ababa"), 0, 5);
  x2(_T("(a|bab)+"), _T("ba"), 1, 2);
  x2(_T("(a|bab)+"), _T("baaaba"), 1, 4);
//  x2(_T("(?:a|b)(?:a|b)"), _T("ab"), 0, 2);
//  x2(_T("(?:a*|b*)(?:a*|b*)"), _T("aaabbb"), 0, 3);
//  x2(_T("(?:a*|b*)(?:a+|b+)"), _T("aaabbb"), 0, 6);
//  x2(_T("(?:a+|b+){2}"), _T("aaabbb"), 0, 6);
  x2(_T("h{0,}"), _T("hhhh"), 0, 4);
//  x2(_T("(?:a+|b+){1,2}"), _T("aaabbb"), 0, 6);
  n(_T("ax{2}*a"), _T("0axxxa1"));
  n(_T("a.{0,2}a"), _T("0aXXXa0"));
  n(_T("a.{0,2}?a"), _T("0aXXXa0"));
  n(_T("a.{0,2}?a"), _T("0aXXXXa0"));
  x2(_T("^a{2,}?a$"), _T("aaa"), 0, 3);
  x2(_T("^[a-z]{2,}?$"), _T("aaa"), 0, 3);
//  x2(_T("(?:a+|\\Ab*)cc"), _T("cc"), 0, 2);
//  n(_T("(?:a+|\\Ab*)cc"), _T("abcc"));
//  x2(_T("(?:^a+|b+)*c"), _T("aabbbabc"), 6, 8);
//  x2(_T("(?:^a+|b+)*c"), _T("aabbbbc"), 0, 7);
//  x2(_T("a|(?i)c"), _T("C"), 0, 1);
//  x2(_T("(?i)c|a"), _T("C"), 0, 1);
//  x2(_T("(?i)c|a"), _T("A"), 0, 1);
//  x2(_T("(?i:c)|a"), _T("C"), 0, 1);
//  n(_T("(?i:c)|a"), _T("A"));
  x2(_T("[abc]?"), _T("abc"), 0, 1);
  x2(_T("[abc]*"), _T("abc"), 0, 3);
  x2(_T("[^abc]*"), _T("abc"), 0, 0);
  n(_T("[^abc]+"), _T("abc"));
  x2(_T("a?\?"), _T("aaa"), 0, 0);
  x2(_T("ba?\?b"), _T("bab"), 0, 3);
  x2(_T("a*?"), _T("aaa"), 0, 0);
  x2(_T("ba*?"), _T("baa"), 0, 1);
  x2(_T("ba*?b"), _T("baab"), 0, 4);
  x2(_T("a+?"), _T("aaa"), 0, 1);
  x2(_T("ba+?"), _T("baa"), 0, 2);
  x2(_T("ba+?b"), _T("baab"), 0, 4);
//  x2(_T("(?:a?)?\?"), _T("a"), 0, 0);
//  x2(_T("(?:a?\?)?"), _T("a"), 0, 0);
//  x2(_T("(?:a?)+?"), _T("aaa"), 0, 1);
//  x2(_T("(?:a+)?\?"), _T("aaa"), 0, 0);
//  x2(_T("(?:a+)?\?b"), _T("aaab"), 0, 4);
//  x2(_T("(?:ab)?{2}"), _T(""), 0, 0);
//  x2(_T("(?:ab)?{2}"), _T("ababa"), 0, 4);
//  x2(_T("(?:ab)*{0}"), _T("ababa"), 0, 0);
//  x2(_T("(?:ab){3,}"), _T("abababab"), 0, 8);
//  n(_T("(?:ab){3,}"), _T("abab"));
//  x2(_T("(?:ab){2,4}"), _T("ababab"), 0, 6);
//  x2(_T("(?:ab){2,4}"), _T("ababababab"), 0, 8);
//  x2(_T("(?:ab){2,4}?"), _T("ababababab"), 0, 4);
//  x2(_T("(?:ab){,}"), _T("ab{,}"), 0, 5);
//  x2(_T("(?:abc)+?{2}"), _T("abcabcabc"), 0, 6);
//  x2(_T("(?:X*)(?i:xa)"), _T("XXXa"), 0, 4);
  x2(_T("(d+)([^abc]z)"), _T("dddz"), 0, 4);
  x2(_T("([^abc]*)([^abc]z)"), _T("dddz"), 0, 4);
  x2(_T("(\\w+)(\\wz)"), _T("dddz"), 0, 4);
  x3(_T("(a)"), _T("a"), 0, 1, 1);
  x3(_T("(ab)"), _T("ab"), 0, 2, 1);
  x2(_T("((ab))"), _T("ab"), 0, 2);
  x3(_T("((ab))"), _T("ab"), 0, 2, 1);
  x3(_T("((ab))"), _T("ab"), 0, 2, 2);
  x3(_T("((((((((((((((((((((ab))))))))))))))))))))"), _T("ab"), 0, 2, 20);
  x3(_T("(ab)(cd)"), _T("abcd"), 0, 2, 1);
  x3(_T("(ab)(cd)"), _T("abcd"), 2, 4, 2);
  x3(_T("()(a)bc(def)ghijk"), _T("abcdefghijk"), 3, 6, 3);
  x3(_T("(()(a)bc(def)ghijk)"), _T("abcdefghijk"), 3, 6, 4);
//  x2(_T("(^a)"), _T("a"), 0, 1);
  x3(_T("(a)|(a)"), _T("ba"), 1, 2, 1);
//  x3(_T("(^a)|(a)"), _T("ba"), 1, 2, 2);
  x3(_T("(a?)"), _T("aaa"), 0, 1, 1);
  x3(_T("(a*)"), _T("aaa"), 0, 3, 1);
  n(_T("(a*)"), _T(""));
  x3(_T("(a+)"), _T("aaaaaaa"), 0, 7, 1);
  x3(_T("(a+|b*)"), _T("bbbaa"), 0, 3, 1);
  x3(_T("(a+|b?)"), _T("bbbaa"), 0, 1, 1);
  x3(_T("(abc)?"), _T("abc"), 0, 3, 1);
  x3(_T("(abc)*"), _T("abc"), 3, 3, 1);
  x3(_T("(abc)+"), _T("abc"), 0, 3, 1);
  x3(_T("(xyz|abc)+"), _T("abc"), 0, 3, 1);
  x3(_T("([xyz][abc]|abc)+"), _T("abc"), 0, 3, 1);
//  x3(_T("((?i:abc))"), _T("AbC"), 0, 3, 1);
//  x2(_T("(abc)(?i:\\1)"), _T("abcABC"), 0, 6);
//  x3(_T("((?m:a.c))"), _T("a\nc"), 0, 3, 1);
//  x3(_T("((?=az)a)"), _T("azb"), 0, 1, 1);
  x3(_T("abc|(.abd)"), _T("zabd"), 0, 4, 1);
//  x2(_T("(?:abc)|(ABC)"), _T("abc"), 0, 3);
//  x3(_T("(?i:(abc))|(zzz)"), _T("ABC"), 0, 3, 1);
  x3(_T("a*(.)"), _T("aaaaz"), 4, 5, 1);
  x3(_T("a*?(.)"), _T("aaaaz"), 0, 1, 1);
  x3(_T("a*?(c)"), _T("aaaac"), 4, 5, 1);
  x3(_T("[bcd]a*(.)"), _T("caaaaz"), 5, 6, 1);
  //x3(_T("(\\Abb)cc"), _T("bbcc"), 0, 2, 1);
  //n(_T("(\\Abb)cc"), _T("zbbcc"));
  //x3(_T("(^bb)cc"), _T("bbcc"), 0, 2, 1);
  //n(_T("(^bb)cc"), _T("zbbcc"));
  //x3(_T("cc(bb$)"), _T("ccbb"), 2, 4, 1);
  //n(_T("cc(bb$)"), _T("ccbbb"));
  //n(_T("(\\1)"), _T(""));
  //n(_T("\\1(a)"), _T("aa"));
  //n(_T("(a(b)\\1)\\2+"), _T("ababb"));
//  n(_T("(?:(?:\\1|z)(a))+$"), _T("zaa"));
//  x2(_T("(?:(?:\\1|z)(a))+$"), _T("zaaa"), 0, 4);
//  x2(_T("(a)(?=\\1)"), _T("aa"), 0, 1);
  //n(_T("(a)$|\\1"), _T("az"));
  //x2(_T("(a)\\1"), _T("aa"), 0, 2);
  //n(_T("(a)\\1"), _T("ab"));
  //x2(_T("(a?)\\1"), _T("aa"), 0, 2);
  //x2(_T("(a?\?)\\1"), _T("aa"), 0, 0);
  //x2(_T("(a*)\\1"), _T("aaaaa"), 0, 4);
  //x3(_T("(a*)\\1"), _T("aaaaa"), 0, 2, 1);
  //x2(_T("a(b*)\\1"), _T("abbbb"), 0, 5);
  //x2(_T("a(b*)\\1"), _T("ab"), 0, 1);
  //x2(_T("(a*)(b*)\\1\\2"), _T("aaabbaaabb"), 0, 10);
  //x2(_T("(a*)(b*)\\2"), _T("aaabbbb"), 0, 7);
  //x2(_T("(((((((a*)b))))))c\\7"), _T("aaabcaaa"), 0, 8);
  //x3(_T("(((((((a*)b))))))c\\7"), _T("aaabcaaa"), 0, 3, 7);
  //x2(_T("(a)(b)(c)\\2\\1\\3"), _T("abcbac"), 0, 6);
  //x2(_T("([a-d])\\1"), _T("cc"), 0, 2);
  //x2(_T("(\\w\\d\\s)\\1"), _T("f5 f5 "), 0, 6);
  //n(_T("(\\w\\d\\s)\\1"), _T("f5 f5"));
  //x2(_T("(who|[a-c]{3})\\1"), _T("whowho"), 0, 6);
  //x2(_T("...(who|[a-c]{3})\\1"), _T("abcwhowho"), 0, 9);
  //x2(_T("(who|[a-c]{3})\\1"), _T("cbccbc"), 0, 6);
  //x2(_T("(^a)\\1"), _T("aa"), 0, 2);
  //n(_T("(^a)\\1"), _T("baa"));
  //n(_T("(a$)\\1"), _T("aa"));
  //n(_T("(ab\\Z)\\1"), _T("ab"));
  //x2(_T("(a*\\Z)\\1"), _T("a"), 1, 1);
  //x2(_T(".(a*\\Z)\\1"), _T("ba"), 1, 2);
  //x3(_T("(.(abc)\\2)"), _T("zabcabc"), 0, 7, 1);
  //x3(_T("(.(..\\d.)\\2)"), _T("z12341234"), 0, 9, 1);
//  x2(_T("((?i:az))\\1"), _T("AzAz"), 0, 4);
//  n(_T("((?i:az))\\1"), _T("Azaz"));
//  x2(_T("(?<=a)b"), _T("ab"), 1, 2);
//  n(_T("(?<=a)b"), _T("bb"));
//  x2(_T("(?<=a|b)b"), _T("bb"), 1, 2);
//  x2(_T("(?<=a|bc)b"), _T("bcb"), 2, 3);
//  x2(_T("(?<=a|bc)b"), _T("ab"), 1, 2);
//  x2(_T("(?<=a|bc||defghij|klmnopq|r)z"), _T("rz"), 1, 2);
  //x2(_T("(a)\\g<1>"), _T("aa"), 0, 2);
//  x2(_T("(?<!a)b"), _T("cb"), 1, 2);
//  n(_T("(?<!a)b"), _T("ab"));
//  x2(_T("(?<!a|bc)b"), _T("bbb"), 0, 1);
//  n(_T("(?<!a|bc)z"), _T("bcz"));
//  x2(_T("(?<name1>a)"), _T("a"), 0, 1);
//  x2(_T("(?<name_2>ab)\\g<name_2>"), _T("abab"), 0, 4);
//  x2(_T("(?<name_3>.zv.)\\k<name_3>"), _T("azvbazvb"), 0, 8);
//  x2(_T("(?<=\\g<ab>)|-\\zEND (?<ab>XyZ)"), _T("XyZ"), 3, 3);
//  x2(_T("(?<n>|a\\g<n>)+"), _T(""), 0, 0);
//  x2(_T("(?<n>|\\(\\g<n>\\))+$"), _T("()(())"), 0, 6);
//  x3(_T("\\g<n>(?<n>.){0}"), _T("X"), 0, 1, 1);
//  x2(_T("\\g<n>(abc|df(?<n>.YZ){2,8}){0}"), _T("XYZ"), 0, 3);
//  x2(_T("\\A(?<n>(a\\g<n>)|)\\z"), _T("aaaa"), 0, 4);
//  x2(_T("(?<n>|\\g<m>\\g<n>)\\z|\\zEND (?<m>a|(b)\\g<m>)"), _T("bbbbabba"), 0, 8);
//  x2(_T("(?<name1240>\\w+\\sx)a+\\k<name1240>"), _T("  fg xaaaaaaaafg x"), 2, 18);
//  x3(_T("(z)()()(?<_9>a)\\g<_9>"), _T("zaa"), 2, 3, 1);
//  x2(_T("(.)(((?<_>a)))\\k<_>"), _T("zaa"), 0, 3);
//  x2(_T("((?<name1>\\d)|(?<name2>\\w))(\\k<name1>|\\k<name2>)"), _T("ff"), 0, 2);
//  x2(_T("(?:(?<x>)|(?<x>efg))\\k<x>"), _T(""), 0, 0);
//  x2(_T("(?:(?<x>abc)|(?<x>efg))\\k<x>"), _T("abcefgefg"), 3, 9);
//  n(_T("(?:(?<x>abc)|(?<x>efg))\\k<x>"), _T("abcefg"));
//  x2(_T("(?:(?<n1>.)|(?<n1>..)|(?<n1>...)|(?<n1>....)|(?<n1>.....)|(?<n1>......)|(?<n1>.......)|(?<n1>........)|(?<n1>.........)|(?<n1>..........)|(?<n1>...........)|(?<n1>............)|(?<n1>......//.......)|(?<n1>..............))\\k<n1>$"), _T("a-pyumpyum"), 2, 10);
//  x3(_T("(?:(?<n1>.)|(?<n1>..)|(?<n1>...)|(?<n1>....)|(?<n1>.....)|(?<n1>......)|(?<n1>.......)|(?<n1>........)|(?<n1>.........)|(?<n1>..........)|(?<n1>...........)|(?<n1>............)|(?<n1>......//.......)|(?<n1>..............))\\k<n1>$"), _T("xxxxabcdefghijklmnabcdefghijklmn"), 4, 18, 14);
//  x3(_T("(?<name1>)(?<name2>)(?<name3>)(?<name4>)(?<name5>)(?<name6>)(?<name7>)(?<name8>)(?<name9>)(?<name10>)(?<name11>)(?<name12>)(?<name13>)(?<name14>)(?<name15>)(?<name16>aaa)(?<name17>)$"), _T("aaa"), 0, 3, 16);
//  x2(_T("(?<foo>a|\\(\\g<foo>\\))"), _T("a"), 0, 1);
//  x2(_T("(?<foo>a|\\(\\g<foo>\\))"), _T("((((((a))))))"), 0, 13);
//  x3(_T("(?<foo>a|\\(\\g<foo>\\))"), _T("((((((((a))))))))"), 0, 17, 1);
//  x2(_T("\\g<bar>|\\zEND(?<bar>.*abc$)"), _T("abcxxxabc"), 0, 9);
  //x2(_T("\\g<1>|\\zEND(.a.)"), _T("bac"), 0, 3);
//  x3(_T("\\g<_A>\\g<_A>|\\zEND(.a.)(?<_A>.b.)"), _T("xbxyby"), 3, 6, 1);
//  x2(_T("\\A(?:\\g<pon>|\\g<pan>|\\zEND  (?<pan>a|c\\g<pon>c)(?<pon>b|d\\g<pan>d))$"), _T("cdcbcdc"), 0, 7);
//  x2(_T("\\A(?<n>|a\\g<m>)\\z|\\zEND (?<m>\\g<n>)"), _T("aaaa"), 0, 4);
//  x2(_T("(?<n>(a|b\\g<n>c){3,5})"), _T("baaaaca"), 1, 5);
//  x2(_T("(?<n>(a|b\\g<n>c){3,5})"), _T("baaaacaaaaa"), 0, 10);
//  x2(_T("(?<pare>\\(([^\\(\\)]++|\\g<pare>)*+\\))"), _T("((a))"), 0, 5);
  //n(_T("()*\\1"), _T(""));
//  x2(_T("(?:()|())*\\1\\2"), _T(""), 0, 0);
  x3(_T("(?:\\1a|())*"), _T("a"), 0, 0, 1);			// クラッシュするパターン
  x2(_T("x((.)*)*x"), _T("0x1x2x3"), 1, 6);			// クラッシュするパターン
  x2(_T("x((.)*)*x(?i:\\1)\\Z"), _T("0x1x2x1X2"), 1, 9);// クラッシュするパターン
//  x2(_T("(?:()|()|()|()|()|())*\\2\\5"), _T(""), 0, 0);
  x2(_T("(?:()|()|()|(x)|()|())*\\2b\\5"), _T("b"), 0, 1);// クラッシュするパターン
  x2(_T("\\xED\\xF2"), _T("\xed\xf2"), 0, 2);
  x2(_T(""), _T("あ"), 0, 0);
  x2(_T("あ"), _T("あ"), 0, 1);
  n(_T("い"), _T("あ"));
  x2(_T("うう"), _T("うう"), 0, 2);
  x2(_T("あいう"), _T("あいう"), 0, 3);
  x2(_T("こここここここここここここここここここここここここここここここここここ"), _T("こここここここここここここここここここここここここここここここここここ"), 0, 35);
  x2(_T("あ"), _T("いあ"), 1, 2);
  x2(_T("いう"), _T("あいう"), 1, 3);
  x2(_T("\\ucab8"), _T("\ucab8"), 0, 1);
  x2(_T("."), _T("あ"), 0, 1);
  x2(_T(".."), _T("かき"), 0, 2);
  n(_T("\\w"), _T("お"));
  x2(_T("\\W"), _T("あ"), 0 ,1 );
  x2(_T("[\\W]"), _T("う$"), 0, 1);
  x2(_T("\\S"), _T("そ"), 0, 1);
  x2(_T("\\S"), _T("漢"), 0, 1);
  n(_T("\\b"), _T("気 "));
  n(_T("\\b"), _T(" ほ"));
  n(_T("\\B"), _T("せそ "));
  n(_T("\\B"), _T("う "));
  n(_T("\\B"), _T(" い"));
  x2(_T("[たち]"), _T("ち"), 0, 1);
  n(_T("[なに]"), _T("ぬ"));
  x2(_T("[う-お]"), _T("え"), 0, 1);
  n(_T("[^け]"), _T("け"));
  n(_T("[\\w]"), _T("ね"));
  n(_T("[\\d]"), _T("ふ"));
  x2(_T("[\\D]"), _T("は"), 0, 1);
  n(_T("[\\s]"), _T("く"));
  x2(_T("[\\S]"), _T("へ"), 0, 1);
  n(_T("[\\w\\d]"), _T("よ"));
  n(_T("[\\w\\d]"), _T("   よ"));
  n(_T("\\w鬼車"), _T(" 鬼車"));
  x2(_T("鬼\\W車"), _T("鬼 車"), 0, 3);
  x2(_T("あ.い.う"), _T("ああいいう"), 0, 5);
  n(_T(".\\wう\\W..ぞ"), _T("えうう うぞぞ"));
  x2(_T("\\s\\wこここ"), _T(" aこここ"), 0, 5);
  x2(_T("ああ.け"), _T("ああけけ"), 0, 4);
  n(_T(".い"), _T("いえ"));
  x2(_T(".お"), _T("おお"), 0, 2);
  x2(_T("^あ"), _T("あ"), 0, 1);
  x2(_T("^む$"), _T("む"), 0, 1);
  x2(_T("^む$"), _T("む\n"), 0, 1);
  n(_T("^\\w$"), _T("に"));
  x2(_T("^\\wかきくけこ$"), _T("zかきくけこ"), 0, 6);
  x2(_T("^\\w...うえお$"), _T("zあいううえお"), 0, 7);
  n(_T("\\w\\w\\s\\Wおおお\\d"), _T("aお  おおお4"));
//  x2(_T("\\Aたちつ"), _T("たちつ"), 0, 6);				// \Aは未対応
//  x2(_T("むめも\\Z"), _T("むめも"), 0, 6);				// \Zは未対応
//  x2(_T("かきく\\z"), _T("かきく"), 0, 6);				// \Zは未対応
//  x2(_T("かきく\\Z"), _T("かきく\n"), 0, 6);				// \Zは未対応
  //x2(_T("\\Gぽぴ"), _T("ぽぴ"), 0, 4);					// \Gは未対応
  //n(_T("\\Gえ"), _T("うえお"));					// \Gは未対応
  //n(_T("とて\\G"), _T("とて"));					// \Gは未対応
  //n(_T("まみ\\A"), _T("まみ"));					// \Aは未対応
  //n(_T("ま\\Aみ"), _T("まみ"));					// \Aは未対応
//  //x2(_T("(?=せ)せ"), _T("せ"), 0, 2);				// (?...は未対応
//  //n(_T("(?=う)."), _T("い"));
//  //x2(_T("(?!う)か"), _T("か"), 0, 2);
//  //n(_T("(?!と)あ"), _T("と"));
//  //x2(_T("(?i:あ)"), _T("あ"), 0, 2);
//  //x2(_T("(?i:ぶべ)"), _T("ぶべ"), 0, 4);
//  //n(_T("(?i:い)"), _T("う"));
//  //x2(_T("(?m:よ.)"), _T("よ\n"), 0, 3);
//  //x2(_T("(?m:.め)"), _T("ま\nめ"), 2, 5);
  n(_T("あ?"), _T(""));
  x2(_T("変?"), _T("化"), 0, 0);
  x2(_T("変?"), _T("変"), 0, 1);
  n(_T("量*"), _T(""));
  x2(_T("量*"), _T("量"), 0, 1);
  x2(_T("子*"), _T("子子子"), 0, 3);
  x2(_T("馬*"), _T("鹿馬馬馬馬"), 0, 0);
  n(_T("山+"), _T(""));
  x2(_T("河+"), _T("河"), 0, 1);
  x2(_T("時+"), _T("時時時時"), 0, 4);
  x2(_T("え+"), _T("ええううう"), 0, 2);
  x2(_T("う+"), _T("おうううう"), 1, 5);
  x2(_T(".?"), _T("た"), 0, 1);
  x2(_T(".*"), _T("ぱぴぷぺ"), 0, 4);
  x2(_T(".+"), _T("ろ"), 0, 1);
  x2(_T(".+"), _T("いうえか\n"), 0, 4);
  x2(_T("あ|い"), _T("あ"), 0, 1);
  x2(_T("あ|い"), _T("い"), 0, 1);
  x2(_T("あい|いう"), _T("あい"), 0, 2);
  x2(_T("あい|いう"), _T("いう"), 0, 2);
//  //x2(_T("を(?:かき|きく)"), _T("をかき"), 0, 6);
//  //x2(_T("を(?:かき|きく)け"), _T("をきくけ"), 0, 8);
//  //x2(_T("あい|(?:あう|あを)"), _T("あを"), 0, 4);
  x2(_T("あ|い|う"), _T("えう"), 1, 2);
  x2(_T("あ|い|うえ|おかき|く|けこさ|しすせ|そ|たち|つてとなに|ぬね"), _T("しすせ"), 0, 3);
  n(_T("あ|い|うえ|おかき|く|けこさ|しすせ|そ|たち|つてとなに|ぬね"), _T("すせ"));
//  x2(_T("あ|^わ"), _T("ぶあ"), 1, 2);			// |と^の組み合わせに難あり
  x2(_T("あ|^を"), _T("をあ"), 0, 1);
  //x2(_T("鬼|\\G車"), _T("け車鬼"), 2, 3);
  //x2(_T("鬼|\\G車"), _T("車鬼"), 0, 1);
  //x2(_T("鬼|\\A車"), _T("b車鬼"), 3, 5);
  //x2(_T("鬼|\\A車"), _T("車"), 0, 2);
  //x2(_T("鬼|車\\Z"), _T("車鬼"), 2, 4);
  //x2(_T("鬼|車\\Z"), _T("車"), 0, 2);
  //x2(_T("鬼|車\\Z"), _T("車\n"), 0, 2);
  //x2(_T("鬼|車\\z"), _T("車鬼"), 2, 4);
  //x2(_T("鬼|車\\z"), _T("車"), 0, 2);
  n(_T("\\w|\\s"), _T("お"));
  x2(_T("\\w|%"), _T("%お"), 0, 1);
  x2(_T("\\w|[&$]"), _T("う&"), 1, 2);
  x2(_T("[い-け]"), _T("う"), 0, 1);
  x2(_T("[い-け]|[^か-こ]"), _T("あ"), 0, 1);
  x2(_T("[い-け]|[^か-こ]"), _T("か"), 0, 1);
  x2(_T("[^あ]"), _T("\n"), 0, 1);
//  x2(_T("(?:あ|[う-き])|いを"), _T("うを"), 0, 2);
//  x2(_T("(?:あ|[う-き])|いを"), _T("いを"), 0, 4);
//  x2(_T("あいう|(?=けけ)..ほ"), _T("けけほ"), 0, 6);
//  x2(_T("あいう|(?!けけ)..ほ"), _T("あいほ"), 0, 6);
//  x2(_T("(?=をあ)..あ|(?=をを)..あ"), _T("ををあ"), 0, 6);
//  x2(_T("(?<=あ|いう)い"), _T("いうい"), 4, 6);
//  n(_T("(?>あ|あいえ)う"), _T("あいえう"));
//  x2(_T("(?>あいえ|あ)う"), _T("あいえう"), 0, 8);
  x2(_T("あ?|い"), _T("あ"), 0, 1);
  x2(_T("あ?|い"), _T("い"), 0, 0);
  n(_T("あ?|い"), _T(""));
  x2(_T("あ*|い"), _T("ああ"), 0, 2);
  x2(_T("あ*|い*"), _T("いあ"), 0, 0);
  x2(_T("あ*|い*"), _T("あい"), 0, 1);
  x2(_T("[aあ]*|い*"), _T("aあいいい"), 0, 2);
  n(_T("あ+|い*"), _T(""));
  x2(_T("あ+|い*"), _T("いいい"), 0, 3);
  x2(_T("あ+|い*"), _T("あいいい"), 0, 1);
  x2(_T("あ+|い*"), _T("aあいいい"), 0, 0);
  n(_T("あ+|い+"), _T(""));
  x2(_T("(あ|い)?"), _T("い"), 0, 1);
  x2(_T("(あ|い)*"), _T("いあ"), 0, 2);
  x2(_T("(あ|い)+"), _T("いあい"), 0, 3);
  x2(_T("(あい|うあ)+"), _T("うああいうえ"), 0, 4);
  x2(_T("(あい|うえ)+"), _T("うああいうえ"), 2, 6);
  x2(_T("(あい|うあ)+"), _T("ああいうあ"), 1, 5);
  x2(_T("(あい|うあ)+"), _T("あいをうあ"), 0, 2);
  x2(_T("(あい|うあ)+"), _T("$$zzzzあいをうあ"), 6, 8);
  x2(_T("(あ|いあい)+"), _T("あいあいあ"), 0, 5);
  x2(_T("(あ|いあい)+"), _T("いあ"), 1, 2);
  x2(_T("(あ|いあい)+"), _T("いあああいあ"), 1, 4);
//  x2(_T("(?:あ|い)(?:あ|い)"), _T("あい"), 0, 4);
//  x2(_T("(?:あ*|い*)(?:あ*|い*)"), _T("あああいいい"), 0, 6);
//  x2(_T("(?:あ*|い*)(?:あ+|い+)"), _T("あああいいい"), 0, 12);
//  x2(_T("(?:あ+|い+){2}"), _T("あああいいい"), 0, 12);
//  x2(_T("(?:あ+|い+){1,2}"), _T("あああいいい"), 0, 12);
//  x2(_T("(?:あ+|\\Aい*)うう"), _T("うう"), 0, 4);
//  n(_T("(?:あ+|\\Aい*)うう"), _T("あいうう"));
//  x2(_T("(?:^あ+|い+)*う"), _T("ああいいいあいう"), 12, 16);
//  x2(_T("(?:^あ+|い+)*う"), _T("ああいいいいう"), 0, 14);
  x2(_T("う{0,}"), _T("うううう"), 0, 4);
//  x2(_T("あ|(?i)c"), _T("C"), 0, 1);
//  x2(_T("(?i)c|あ"), _T("C"), 0, 1);
//  x2(_T("(?i:あ)|a"), _T("a"), 0, 1);
//  n(_T("(?i:あ)|a"), _T("A"));
  x2(_T("[あいう]?"), _T("あいう"), 0, 1);
  x2(_T("[あいう]*"), _T("あいう"), 0, 3);
  x2(_T("[^あいう]*"), _T("あいう"),0,0 );
  n(_T("[^あいう]+"), _T("あいう"));
  x2(_T("あ??"), _T("あああ"), 0, 0);
  x2(_T("いあ??い"), _T("いあい"), 0, 3);
  x2(_T("あ*?"), _T("あああ"), 0, 0);
  x2(_T("いあ*?"), _T("いああ"), 0, 1);
  x2(_T("いあ*?い"), _T("いああい"), 0, 4);
  x2(_T("あ+?"), _T("あああ"), 0, 1);
  x2(_T("いあ+?"), _T("いああ"), 0, 2);
  x2(_T("いあ+?い"), _T("いああい"), 0, 4);
//  x2(_T("(?:天?)?\?"), _T("天"), 0, 0);
//  x2(_T("(?:天?\?)?"), _T("天"), 0, 0);
//  x2(_T("(?:夢?)+?"), _T("夢夢夢"), 0, 2);
//  x2(_T("(?:風+)?\?"), _T("風風風"), 0, 0);
//  x2(_T("(?:雪+)?\?霜"), _T("雪雪雪霜"), 0, 8);
//  x2(_T("(?:あい)?{2}"), _T(""), 0, 0);
//  x2(_T("(?:鬼車)?{2}"), _T("鬼車鬼車鬼"), 0, 8);
//  x2(_T("(?:鬼車)*{0}"), _T("鬼車鬼車鬼"), 0, 0);
//  x2(_T("(?:鬼車){3,}"), _T("鬼車鬼車鬼車鬼車"), 0, 16);
//  n(_T("(?:鬼車){3,}"), _T("鬼車鬼車"));
//  x2(_T("(?:鬼車){2,4}"), _T("鬼車鬼車鬼車"), 0, 12);
//  x2(_T("(?:鬼車){2,4}"), _T("鬼車鬼車鬼車鬼車鬼車"), 0, 16);
//  x2(_T("(?:鬼車){2,4}?"), _T("鬼車鬼車鬼車鬼車鬼車"), 0, 8);
//  x2(_T("(?:鬼車){,}"), _T("鬼車{,}"), 0, 7);
//  x2(_T("(?:かきく)+?{2}"), _T("かきくかきくかきく"), 0, 12);
  x3(_T("(火)"), _T("火"), 0, 1, 1);
  x3(_T("(火水)"), _T("火水"), 0, 2, 1);
  x2(_T("((時間))"), _T("時間"), 0, 2);
  x3(_T("((風水))"), _T("風水"), 0, 2, 1);
  x3(_T("((昨日))"), _T("昨日"), 0, 2, 2);
  x3(_T("((((((((((((((((((((量子))))))))))))))))))))"), _T("量子"), 0, 2, 20);
  x3(_T("(あい)(うえ)"), _T("あいうえ"), 0, 2, 1);
  x3(_T("(あい)(うえ)"), _T("あいうえ"), 2, 4, 2);
  x3(_T("()(あ)いう(えおか)きくけこ"), _T("あいうえおかきくけこ"), 3, 6, 3);
  x3(_T("(()(あ)いう(えおか)きくけこ)"), _T("あいうえおかきくけこ"), 3, 6, 4);
  x3(_T(".*(フォ)ン・マ(ン()シュタ)イン"), _T("フォン・マンシュタイン"), 5, 9, 2);
//  x2(_T("(^あ)"), _T("あ"), 0, 1);			// ^の処理に難あり
  x3(_T("(あ)|(あ)"), _T("いあ"), 1, 2, 1);
  x3(_T("(^あ)|(あ)"), _T("いあ"), 1, 2, 2);
  x3(_T("(あ?)"), _T("あああ"), 0, 1, 1);
  x3(_T("(ま*)"), _T("ままま"), 0, 3, 1);
  n(_T("(と*)"), _T(""));
  x3(_T("(る+)"), _T("るるるるるるる"), 0, 7, 1);
  x3(_T("(ふ+|へ*)"), _T("ふふふへへ"), 0, 3, 1);
  x3(_T("(あ+|い?)"), _T("いいいああ"), 0, 1, 1);
  x3(_T("(あいう)?"), _T("あいう"), 0, 3, 1);
  x3(_T("(あいう)*"), _T("あいう"), 3, 3, 1);	// *の処理に難あり
  x3(_T("(あいう)+"), _T("あいう"), 0, 3, 1);
  x3(_T("(さしす|あいう)+"), _T("あいう"), 0, 3, 1);
  x3(_T("([なにぬ][かきく]|かきく)+"), _T("かきく"), 0, 3, 1);
//  x3(_T("((?i:あいう))"), _T("あいう"), 0, 6, 1);
//  x3(_T("((?m:あ.う))"), _T("あ\nう"), 0, 5, 1);
//  x3(_T("((?=あん)あ)"), _T("あんい"), 0, 2, 1);
  x3(_T("あいう|(.あいえ)"), _T("んあいえ"), 0, 4, 1);
  x3(_T("あ*(.)"), _T("ああああん"), 4, 5, 1);
  x3(_T("あ*?(.)"), _T("ああああん"), 0, 1, 1);
  x3(_T("あ*?(ん)"), _T("ああああん"), 4, 5, 1);
  x3(_T("[いうえ]あ*(.)"), _T("えああああん"), 5, 6, 1);
  //x3(_T("(\\Aいい)うう"), _T("いいうう"), 0, 2, 1);
  //n(_T("(\\Aいい)うう"), _T("んいいうう"));
  //x3(_T("(^いい)うう"), _T("いいうう"), 0, 2, 1);		// ^の処理に難あり
  //n(_T("(^いい)うう"), _T("んいいうう"));
  //x3(_T("ろろ(るる$)"), _T("ろろるる"), 2, 4, 1);		// ()の中の^$の処理に難あり
  //n(_T("ろろ(るる$)"), _T("ろろるるる"));
  //x2(_T("(無)\\1"), _T("無無"), 0, 2);			// \1,\2...は未対応
  //n(_T("(無)\\1"), _T("無武"));
  //x2(_T("(空?)\\1"), _T("空空"), 0, 2);
  //x2(_T("(空?\?)\\1"), _T("空空"), 0, 0);
  //x2(_T("(空*)\\1"), _T("空空空空空"), 0, 4);
  //x3(_T("(空*)\\1"), _T("空空空空空"), 0, 2, 1);
  //x2(_T("あ(い*)\\1"), _T("あいいいい"), 0, 5);
  //x2(_T("あ(い*)\\1"), _T("あい"), 0, 1);
  //x2(_T("(あ*)(い*)\\1\\2"), _T("あああいいあああいい"), 0, 10);
  //x2(_T("(あ*)(い*)\\2"), _T("あああいいいい"), 0, 7);
  //x3(_T("(あ*)(い*)\\2"), _T("あああいいいい"), 3, 5, 2);
  //x2(_T("(((((((ぽ*)ぺ))))))ぴ\\7"), _T("ぽぽぽぺぴぽぽぽ"), 0, 16);
  //x3(_T("(((((((ぽ*)ぺ))))))ぴ\\7"), _T("ぽぽぽぺぴぽぽぽ"), 0, 6, 7);
  //x2(_T("(は)(ひ)(ふ)\\2\\1\\3"), _T("はひふひはふ"), 0, 12);
  //x2(_T("([き-け])\\1"), _T("くく"), 0, 4);
  //x2(_T("(\\w\\d\\s)\\1"), _T("あ5 あ5 "), 0, 8);
  //n(_T("(\\w\\d\\s)\\1"), _T("あ5 あ5"));
  //x2(_T("(誰？|[あ-う]{3})\\1"), _T("誰？誰？"), 0, 8);
  //x2(_T("...(誰？|[あ-う]{3})\\1"), _T("あaあ誰？誰？"), 0, 13);
  //x2(_T("(誰？|[あ-う]{3})\\1"), _T("ういうういう"), 0, 12);
  //x2(_T("(^こ)\\1"), _T("ここ"), 0, 4);
  //n(_T("(^む)\\1"), _T("めむむ"));
  //n(_T("(あ$)\\1"), _T("ああ"));
  //n(_T("(あい\\Z)\\1"), _T("あい"));
  //x2(_T("(あ*\\Z)\\1"), _T("あ"), 2, 2);
  //x2(_T(".(あ*\\Z)\\1"), _T("いあ"), 2, 4);
  //x3(_T("(.(やいゆ)\\2)"), _T("zやいゆやいゆ"), 0, 13, 1);
  //x3(_T("(.(..\\d.)\\2)"), _T("あ12341234"), 0, 10, 1);
//  x2(_T("((?i:あvず))\\1"), _T("あvずあvず"), 0, 10);
//  x2(_T("(?<愚か>変|\\(\\g<愚か>\\))"), _T("((((((変))))))"), 0, 14);
//  x2(_T("\\A(?:\\g<阿_1>|\\g<云_2>|\\z終了  (?<阿_1>観|自\\g<云_2>自)(?<云_2>在|菩薩\\g<阿_1>菩薩))$"), _T("菩薩自菩薩自在自菩薩自菩薩"), 0, 26);
  //x2(_T("[[ひふ]]"), _T("ふ"), 0, 1);			// [[]]のネストは難あり
  //x2(_T("[[いおう]か]"), _T("か"), 0, 1);
  //n(_T("[[^あ]]"), _T("あ"));
  //n(_T("[^[あ]]"), _T("あ"));
  //x2(_T("[^[^あ]]"), _T("あ"), 0, 2);
  //x2(_T("[[かきく]&&きく]"), _T("く"), 0, 2);
  //n(_T("[[かきく]&&きく]"), _T("か"));
  //n(_T("[[かきく]&&きく]"), _T("け"));
  x2(_T("[あ-ん&&い-を&&う-ゑ]"), _T("ゑ"), 0, 1);
  n(_T("[^あ-ん&&い-を&&う-ゑ]"), _T("ゑ"));
  //x2(_T("[[^あ&&あ]&&あ-ん]"), _T("い"), 0, 1);
  //n(_T("[[^あ&&あ]&&あ-ん]"), _T("あ"));
  //x2(_T("[[^あ-ん&&いうえお]&&[^う-か]]"), _T("き"), 0, 1);
  //n(_T("[[^あ-ん&&いうえお]&&[^う-か]]"), _T("い"));
  //x2(_T("[^[^あいう]&&[^うえお]]"), _T("う"), 0, 2);
  //x2(_T("[^[^あいう]&&[^うえお]]"), _T("え"), 0, 2);
  //n(_T("[^[^あいう]&&[^うえお]]"), _T("か"));
  x2(_T("[あ-&&-あ]"), _T("-"), 0, 1);
  //x2(_T("[^[^a-zあいう]&&[^bcdefgうえお]q-w]"), _T("え"), 0, 2);
  //x2(_T("[^[^a-zあいう]&&[^bcdefgうえお]g-w]"), _T("f"), 0, 1);
  //x2(_T("[^[^a-zあいう]&&[^bcdefgうえお]g-w]"), _T("g"), 0, 1);
  //n(_T("[^[^a-zあいう]&&[^bcdefgうえお]g-w]"), _T("2"));
  x2(_T("a<b>バージョンのダウンロード<\\/b>"), _T("a<b>バージョンのダウンロード</b>"), 0, 20);
  x2(_T(".<b>バージョンのダウンロード<\\/b>"), _T("a<b>バージョンのダウンロード</b>"), 0, 20);
  _ftprintf(stdout,
       _T("\nRESULT   SUCC: %d,  FAIL: %d,  ERROR: %d\n"),
       nsucc, nfail, nerror);


  return ((nfail == 0 && nerror == 0) ? 0 : -1);
}



static void xxt(TCHAR* pattern, TCHAR* str , unsigned int pos , BOOL forward, int from, int to, int mem, int not)
{
	int rc;
	REGE_NFA *nfa;
	REGE_REFER *rf;

	nfa = rege_compile(pattern);
	if (nfa==NULL) {
		_ftprintf(err_file, _T("ERROR: %s\n"),pattern);
		nerror++;
		return ;
	}
	rc = reg_match_intext(nfa, str , &rf, FALSE , pos , forward);

	if (rc == 0) {
		if (not) {
		  _ftprintf(stdout, _T("OK(N): /%s/ '%s'\n"), pattern, str);
		  nsucc++;
		}
		else {
		  _ftprintf(stdout, _T("FAIL: /%s/ '%s'\n"), pattern, str);
		  nfail++;
		}
	}
	else {
		if (not) {
		  _ftprintf(stdout, _T("FAIL(N): /%s/ '%s'\n"), pattern, str);
		  nfail++;
		}
		else {
			if ( rf[mem].st-str == from && rf[mem].en-str == to) {
			_ftprintf(stdout, _T("OK: /%s/ '%s'\n"), pattern, str);
			nsucc++;
		  }
		  else {
			_ftprintf(stdout, _T("FAIL: /%s/ '%s' %d-%d : %d-%d\n"), pattern, str,
				from, to, rf[mem].st-str, rf[mem].en-str);
			nfail++;
		  }
		}
	}
	free_refer(rf);
	free_nfa(nfa);
	rf = NULL;
	nfa = NULL;

}

static void x2t(TCHAR* pattern, TCHAR* str, unsigned int pos , BOOL forward , int from, int to)
{
  xxt(pattern, str,pos,forward, from, to, 0, 0);
}

static void nt(TCHAR* pattern, TCHAR* str , unsigned int pos , BOOL forward )
{
  xxt(pattern, str,pos,forward, 0, 0, 0, 1);
}

extern int testmaint()
{
	TCHAR *str;
	err_file = stdout;


	str = _T("このテキストの中からtextを探す");
	x2t( _T("テキスト|text") , str ,7,TRUE,10,14);
	x2t( _T("テキスト|text") , str ,7,FALSE,2,6);
	nt( _T("テキスト") , str ,7,TRUE);
	nt( _T("text") , str ,7,FALSE);

	str = _T("テキスト１行目\n\rテキスト２行目\n\rテキスト３行目\n\rテキスト４行目");

	x2t( _T("^テキスト") , str ,0 ,TRUE,0,4);
	x2t( _T("^テキスト") , str ,1 ,TRUE,9,13);
	x2t( _T("^テキスト") , str ,10 ,TRUE,18,22);
	x2t( _T("^テキスト") , str ,19 ,TRUE,27,31);
	nt( _T("^テキスト") , str ,28 ,TRUE);
	
	nt( _T("^テキスト") , str ,0 ,FALSE);
	x2t( _T("^テキスト") , str ,1 ,FALSE,0,4);
	x2t( _T("^テキスト") , str ,10 ,FALSE,9,13);
	x2t( _T("^テキスト") , str ,19 ,FALSE,18,22);
	x2t( _T("^テキスト") , str ,28 ,FALSE,27,31);

	x2t( _T("行目$") , str ,0 ,TRUE,5,7);
	x2t( _T("行目$") , str ,9 ,TRUE,14,16);
	x2t( _T("行目$") , str ,18 ,TRUE,23,25);
	x2t( _T("行目$") , str ,27 ,TRUE,32,34);
	nt( _T("行目$") , str ,33 ,TRUE);

	nt( _T("行目$") , str ,1 ,FALSE);
	x2t( _T("行目$") , str ,9 ,FALSE,5,7);
	x2t( _T("行目$") , str ,18 ,FALSE,14,16);
	x2t( _T("行目$") , str ,27 ,FALSE,23,25);
	x2t( _T("行目$") , str ,33 ,FALSE,32,34);

#if 0
  n(_T(""), _T(""));
  n(_T("^"), _T(""));
  n(_T("$"), _T(""));
  //x2(_T("\\G"), _T(""), 0, 0);
  //x2(_T("\\A"), _T(""), 0, 0);
  //x2(_T("\\Z"), _T(""), 0, 0);
  //x2(_T("\\z"), _T(""), 0, 0);
  n(_T("^$"), _T(""));
  //x2(_T("\\ca"), _T("\001"), 0, 1);
  //x2(_T("\\C-b"), _T("\002"), 0, 1);
  //x2(_T("\\c\\\\"), _T("\034"), 0, 1);
  //x2(_T("q[\\c\\\\]"), _T("q\034"), 0, 2);
  x2(_T(""), _T("a"), 0, 0);
  x2(_T("a"), _T("a"), 0, 1);
  x2(_T("\\x61"), _T("a"), 0, 1);
  x2(_T("aa"), _T("aa"), 0, 2);
  x2(_T("aaa"), _T("aaa"), 0, 3);
  x2(_T("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"), _T("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"), 0, 35);
  x2(_T("ab"), _T("ab"), 0, 2);
  x2(_T("b"), _T("ab"), 1, 2);
  x2(_T("bc"), _T("abc"), 1, 3);
//  x2(_T("(?i:#RET#)"), _T("#INS##RET#"), 5, 10);
//  x2(_T("\\17"), _T("\017"), 0, 1);
  x2(_T("\\x1f"), _T("\x1f"), 0, 1);
//  x2(_T("a(?#....\\\\JJJJ)b"), _T("ab"), 0, 2);
//  x2(_T("(?x)  G (o O(?-x)oO) g L"), _T("GoOoOgLe"), 0, 7);
  x2(_T("."), _T("a"), 0, 1);
  n(_T("."), _T(""));
  x2(_T(".."), _T("ab"), 0, 2);
  x2(_T("\\w"), _T("e"), 0, 1);
  n(_T("\\W"), _T("e"));
  x2(_T("\\s"), _T(" "), 0, 1);
  x2(_T("\\S"), _T("b"), 0, 1);
  x2(_T("\\d"), _T("4"), 0, 1);
  n(_T("\\D"), _T("4"));
  //x2(_T("\\b"), _T("z "), 0, 0);
  //x2(_T("\\b"), _T(" z"), 1, 1);
  //x2(_T("\\B"), _T("zz "), 1, 1);
  //x2(_T("\\B"), _T("z "), 2, 2);
  //x2(_T("\\B"), _T(" z"), 0, 0);
  x2(_T("[ab]"), _T("b"), 0, 1);
  n(_T("[ab]"), _T("c"));
  x2(_T("[a-z]"), _T("t"), 0, 1);
  n(_T("[^a]"), _T("a"));
  x2(_T("[^a]"), _T("\n"), 0, 1);
  x2(_T("[]]"), _T("]"), 0, 1);
  n(_T("[^]]"), _T("]"));
//  x2(_T("[\\^]+"), _T("0^^1"), 1, 3);
  x2(_T("[b-]"), _T("b"), 0, 1);
  x2(_T("[b-]"), _T("-"), 0, 1);
  x2(_T("[\\w]"), _T("z"), 0, 1);
  n(_T("[\\w]"), _T(" "));
  x2(_T("[\\W]"), _T("b$"), 1, 2);
  x2(_T("[\\d]"), _T("5"), 0, 1);
  n(_T("[\\d]"), _T("e"));
  x2(_T("[\\D]"), _T("t"), 0, 1);
  n(_T("[\\D]"), _T("3"));
  x2(_T("[\\s]"), _T(" "), 0, 1);
  n(_T("[\\s]"), _T("a"));
  x2(_T("[\\S]"), _T("b"), 0, 1);
  n(_T("[\\S]"), _T(" "));
  x2(_T("[\\w\\d]"), _T("2"), 0, 1);
  n(_T("[\\w\\d]"), _T(" "));
  //x2(_T("[[:upper:]]"), _T("B"), 0, 1);
  //x2(_T("[*[:xdigit:]+]"), _T("+"), 0, 1);
  //x2(_T("[*[:xdigit:]+]"), _T("GHIKK-9+*"), 6, 7);
  //x2(_T("[*[:xdigit:]+]"), _T("-@^+"), 3, 4);
  //n(_T("[[:upper]]"), _T("A"));
  //x2(_T("[[:upper]]"), _T(":"), 0, 1);
  //x2(_T("[\\044-\\047]"), _T("\046"), 0, 1);
  x2(_T("[\\x5a-\\x5c]"), _T("\x5b"), 0, 1);
  x2(_T("[\\x6A-\\x6D]"), _T("\x6c"), 0, 1);
  n(_T("[\\x6A-\\x6D]"), _T("\x6E"));
  n(_T("^[0-9A-F]+ 0+ UNDEF "), _T("75F 00000000 SECT14A notype ()    External    | _rb_apply"));
  x2(_T("[\\[]"), _T("["), 0, 1);
  x2(_T("[\\]]"), _T("]"), 0, 1);
  x2(_T("[&]"), _T("&"), 0, 1);
  //x2(_T("[[ab]]"), _T("b"), 0, 1);
  //x2(_T("[[ab]c]"), _T("c"), 0, 1);
  //n(_T("[[^a]]"), _T("a"));
  //n(_T("[^[a]]"), _T("a"));
  //x2(_T("[[ab]&&bc]"), _T("b"), 0, 1);
  //n(_T("[[ab]&&bc]"), _T("a"));
  //n(_T("[[ab]&&bc]"), _T("c"));
  x2(_T("[a-z&&b-y&&c-x]"), _T("w"), 0, 1);
  n(_T("[^a-z&&b-y&&c-x]"), _T("w"));
  //x2(_T("[[^a&&a]&&a-z]"), _T("b"), 0, 1);
  //n(_T("[[^a&&a]&&a-z]"), _T("a"));
  //x2(_T("[[^a-z&&bcdef]&&[^c-g]]"), _T("h"), 0, 1);
  //n(_T("[[^a-z&&bcdef]&&[^c-g]]"), _T("c"));
  //x2(_T("[^[^abc]&&[^cde]]"), _T("c"), 0, 1);
  //x2(_T("[^[^abc]&&[^cde]]"), _T("e"), 0, 1);
  //n(_T("[^[^abc]&&[^cde]]"), _T("f"));
  x2(_T("[a-&&-a]"), _T("-"), 0, 1);
  x2(_T("[a\\-&&\\-a]"), _T("&"),0,1);
  n(_T("\\wabc"), _T(" abc"));
  x2(_T("a\\Wbc"), _T("a bc"), 0, 4);
  x2(_T("a.b.c"), _T("aabbc"), 0, 5);
  x2(_T(".\\wb\\W..c"), _T("abb bcc"), 0, 7);
  x2(_T("\\s\\wzzz"), _T(" zzzz"), 0, 5);
  x2(_T("aa.b"), _T("aabb"), 0, 4);
  n(_T(".a"), _T("ab"));
  x2(_T(".a"), _T("aa"), 0, 2);
  x2(_T("^a"), _T("a"), 0, 1);
  x2(_T("^a$"), _T("a"), 0, 1);
  x2(_T("^\\w$"), _T("a"), 0, 1);
  n(_T("^\\w$"), _T(" "));
  x2(_T("^\\wab$"), _T("zab"), 0, 3);
  x2(_T("^\\wabcdef$"), _T("zabcdef"), 0, 7);
  x2(_T("^\\w...def$"), _T("zabcdef"), 0, 7);
  x2(_T("\\w\\w\\s\\Waaa\\d"), _T("aa  aaa4"), 0, 8);
  //x2(_T("\\A\\Z"), _T(""), 0, 0);
  //x2(_T("\\Axyz"), _T("xyz"), 0, 3);
  //x2(_T("xyz\\Z"), _T("xyz"), 0, 3);
  //x2(_T("xyz\\z"), _T("xyz"), 0, 3);
  //x2(_T("a\\Z"), _T("a"), 0, 1);
  //x2(_T("\\Gaz"), _T("az"), 0, 2);
  //n(_T("\\Gz"), _T("bza"));
  //n(_T("az\\G"), _T("az"));
  //n(_T("az\\A"), _T("az"));
  //n(_T("a\\Az"), _T("az"));
  x2(_T("\\^\\$"), _T("^$"), 0, 2);
  x2(_T("^x?y"), _T("xy"), 0, 2);
  x2(_T("^(x?y)"), _T("xy"), 0, 2);
  x2(_T("\\w"), _T("_"), 0, 1);
  n(_T("\\W"), _T("_"));
//  x2(_T("(?=z)z"), _T("z"), 0, 1);
//  n(_T("(?=z)."), _T("a"));
//  x2(_T("(?!z)a"), _T("a"), 0, 1);
//  n(_T("(?!z)a"), _T("z"));
//  x2(_T("(?i:a)"), _T("a"), 0, 1);
//  x2(_T("(?i:a)"), _T("A"), 0, 1);
//  x2(_T("(?i:A)"), _T("a"), 0, 1);
//  n(_T("(?i:A)"), _T("b"));
//  x2(_T("(?i:[A-Z])"), _T("a"), 0, 1);
//  x2(_T("(?i:[f-m])"), _T("H"), 0, 1);
//  x2(_T("(?i:[f-m])"), _T("h"), 0, 1);
//  n(_T("(?i:[f-m])"), _T("e"));
//  x2(_T("(?i:[A-c])"), _T("D"), 0, 1);
//  n(_T("(?i:[^a-z])"), _T("A"));
//  n(_T("(?i:[^a-z])"), _T("a"));
//  x2(_T("(?i:[!-k])"), _T("Z"), 0, 1);
//  x2(_T("(?i:[!-k])"), _T("7"), 0, 1);
//  x2(_T("(?i:[T-}])"), _T("b"), 0, 1);
//  x2(_T("(?i:[T-}])"), _T("{"), 0, 1);
//  x2(_T("(?i:\\?a)"), _T("?A"), 0, 2);
//  x2(_T("(?i:\\*A)"), _T("*a"), 0, 2);
  n(_T("."), _T("\n"));
//  x2(_T("(?m:.)"), _T("\n"), 0, 1);
//  x2(_T("(?m:a.)"), _T("a\n"), 0, 2);
//  x2(_T("(?m:.b)"), _T("a\nb"), 1, 3);
  x2(_T(".*abc"), _T("dddabdd\nddabc"), 8, 13);
//  x2(_T("(?m:.*abc)"), _T("dddabddabc"), 0, 10);
//  n(_T("(?i)(?-i)a"), _T("A"));
//  n(_T("(?i)(?-i:a)"), _T("A"));
  n(_T("a?"), _T(""));
  x2(_T("a?"), _T("b"), 0, 0);
  x2(_T("a?"), _T("a"), 0, 1);
  n(_T("a*"), _T(""));
  x2(_T("a*"), _T("a"), 0, 1);
  x2(_T("a*"), _T("aaa"), 0, 3);
  x2(_T("a*"), _T("baaaa"), 0, 0);
  n(_T("a+"), _T(""));
  x2(_T("a+"), _T("a"), 0, 1);
  x2(_T("a+"), _T("aaaa"), 0, 4);
  x2(_T("a+"), _T("aabbb"), 0, 2);
  x2(_T("a+"), _T("baaaa"), 1, 5);
  n(_T(".?"), _T(""));
  x2(_T(".?"), _T("f"), 0, 1);
  x2(_T(".?"), _T("\n"), 0, 0);
  n(_T(".*"), _T(""));
  x2(_T(".*"), _T("abcde"), 0, 5);
  x2(_T(".+"), _T("z"), 0, 1);
  x2(_T(".+"), _T("zdswer\n"), 0, 6);
  //x2(_T("(.*)a\\1f"), _T("babfbac"), 0, 4);
  //x2(_T("(.*)a\\1f"), _T("bacbabf"), 3, 7);
  //x2(_T("((.*)a\\2f)"), _T("bacbabf"), 3, 7);
  //x2(_T("(.*)a\\1f"), _T("baczzzzzz\nbazz\nzzzzbabf"), 19, 23);
  x2(_T("a|b"), _T("a"), 0, 1);
  x2(_T("a|b"), _T("b"), 0, 1);
  x2(_T("|a"), _T("a"), 0, 0);
  x2(_T("(|a)"), _T("a"), 0, 0);
  x2(_T("ab|bc"), _T("ab"), 0, 2);
  x2(_T("ab|bc"), _T("bc"), 0, 2);
//  x2(_T("z(?:ab|bc)"), _T("zbc"), 0, 3);
//  x2(_T("a(?:ab|bc)c"), _T("aabc"), 0, 4);
//  x2(_T("ab|(?:ac|az)"), _T("az"), 0, 2);
  x2(_T("a|b|c"), _T("dc"), 1, 2);
  x2(_T("a|b|cd|efg|h|ijk|lmn|o|pq|rstuvwx|yz"), _T("pqr"), 0, 2);
  n(_T("a|b|cd|efg|h|ijk|lmn|o|pq|rstuvwx|yz"), _T("mn"));
  //x2(_T("a|^z"), _T("ba"), 1, 2);
  x2(_T("a|^z"), _T("za"), 0, 1);
  //x2(_T("a|\\Gz"), _T("bza"), 2, 3);
  //x2(_T("a|\\Gz"), _T("za"), 0, 1);
  //x2(_T("a|\\Az"), _T("bza"), 2, 3);
  //x2(_T("a|\\Az"), _T("za"), 0, 1);
  //x2(_T("a|b\\Z"), _T("ba"), 1, 2);
  //x2(_T("a|b\\Z"), _T("b"), 0, 1);
  //x2(_T("a|b\\z"), _T("ba"), 1, 2);
  //x2(_T("a|b\\z"), _T("b"), 0, 1);
  x2(_T("\\w|\\s"), _T(" "), 0, 1);
  n(_T("\\w|\\w"), _T(" "));
  x2(_T("\\w|%"), _T("%"), 0, 1);
  x2(_T("\\w|[&$]"), _T("&"), 0, 1);
  x2(_T("[b-d]|[^e-z]"), _T("a"), 0, 1);
//  x2(_T("(?:a|[c-f])|bz"), _T("dz"), 0, 1);
//  x2(_T("(?:a|[c-f])|bz"), _T("bz"), 0, 2);
//  x2(_T("abc|(?=zz)..f"), _T("zzf"), 0, 3);
//  x2(_T("abc|(?!zz)..f"), _T("abf"), 0, 3);
//  x2(_T("(?=za)..a|(?=zz)..a"), _T("zza"), 0, 3);
//  n(_T("(?>a|abd)c"), _T("abdc"));
//  x2(_T("(?>abd|a)c"), _T("abdc"), 0, 4);
  x2(_T("a?|b"), _T("a"), 0, 1);
  x2(_T("a?|b"), _T("b"), 0, 0);
  n(_T("a?|b"), _T(""));
  x2(_T("a*|b"), _T("aa"), 0, 2);
  x2(_T("a*|b*"), _T("ba"), 0, 0);
  x2(_T("a*|b*"), _T("ab"), 0, 1);
  n(_T("a+|b*"), _T(""));
  x2(_T("a+|b*"), _T("bbb"), 0, 3);
  x2(_T("a+|b*"), _T("abbb"), 0, 1);
  n(_T("a+|b+"), _T(""));
  x2(_T("(a|b)?"), _T("b"), 0, 1);
  x2(_T("(a|b)*"), _T("ba"), 0, 2);
  x2(_T("(a|b)+"), _T("bab"), 0, 3);
  x2(_T("(ab|ca)+"), _T("caabbc"), 0, 4);
  x2(_T("(ab|ca)+"), _T("aabca"), 1, 5);
  x2(_T("(ab|ca)+"), _T("abzca"), 0, 2);
  x2(_T("(a|bab)+"), _T("ababa"), 0, 5);
  x2(_T("(a|bab)+"), _T("ba"), 1, 2);
  x2(_T("(a|bab)+"), _T("baaaba"), 1, 4);
//  x2(_T("(?:a|b)(?:a|b)"), _T("ab"), 0, 2);
//  x2(_T("(?:a*|b*)(?:a*|b*)"), _T("aaabbb"), 0, 3);
//  x2(_T("(?:a*|b*)(?:a+|b+)"), _T("aaabbb"), 0, 6);
//  x2(_T("(?:a+|b+){2}"), _T("aaabbb"), 0, 6);
  x2(_T("h{0,}"), _T("hhhh"), 0, 4);
//  x2(_T("(?:a+|b+){1,2}"), _T("aaabbb"), 0, 6);
  n(_T("ax{2}*a"), _T("0axxxa1"));
  n(_T("a.{0,2}a"), _T("0aXXXa0"));
  n(_T("a.{0,2}?a"), _T("0aXXXa0"));
  n(_T("a.{0,2}?a"), _T("0aXXXXa0"));
  x2(_T("^a{2,}?a$"), _T("aaa"), 0, 3);
  x2(_T("^[a-z]{2,}?$"), _T("aaa"), 0, 3);
//  x2(_T("(?:a+|\\Ab*)cc"), _T("cc"), 0, 2);
//  n(_T("(?:a+|\\Ab*)cc"), _T("abcc"));
//  x2(_T("(?:^a+|b+)*c"), _T("aabbbabc"), 6, 8);
//  x2(_T("(?:^a+|b+)*c"), _T("aabbbbc"), 0, 7);
//  x2(_T("a|(?i)c"), _T("C"), 0, 1);
//  x2(_T("(?i)c|a"), _T("C"), 0, 1);
//  x2(_T("(?i)c|a"), _T("A"), 0, 1);
//  x2(_T("(?i:c)|a"), _T("C"), 0, 1);
//  n(_T("(?i:c)|a"), _T("A"));
  x2(_T("[abc]?"), _T("abc"), 0, 1);
  x2(_T("[abc]*"), _T("abc"), 0, 3);
  x2(_T("[^abc]*"), _T("abc"), 0, 0);
  n(_T("[^abc]+"), _T("abc"));
  x2(_T("a?\?"), _T("aaa"), 0, 0);
  x2(_T("ba?\?b"), _T("bab"), 0, 3);
  x2(_T("a*?"), _T("aaa"), 0, 0);
  x2(_T("ba*?"), _T("baa"), 0, 1);
  x2(_T("ba*?b"), _T("baab"), 0, 4);
  x2(_T("a+?"), _T("aaa"), 0, 1);
  x2(_T("ba+?"), _T("baa"), 0, 2);
  x2(_T("ba+?b"), _T("baab"), 0, 4);
//  x2(_T("(?:a?)?\?"), _T("a"), 0, 0);
//  x2(_T("(?:a?\?)?"), _T("a"), 0, 0);
//  x2(_T("(?:a?)+?"), _T("aaa"), 0, 1);
//  x2(_T("(?:a+)?\?"), _T("aaa"), 0, 0);
//  x2(_T("(?:a+)?\?b"), _T("aaab"), 0, 4);
//  x2(_T("(?:ab)?{2}"), _T(""), 0, 0);
//  x2(_T("(?:ab)?{2}"), _T("ababa"), 0, 4);
//  x2(_T("(?:ab)*{0}"), _T("ababa"), 0, 0);
//  x2(_T("(?:ab){3,}"), _T("abababab"), 0, 8);
//  n(_T("(?:ab){3,}"), _T("abab"));
//  x2(_T("(?:ab){2,4}"), _T("ababab"), 0, 6);
//  x2(_T("(?:ab){2,4}"), _T("ababababab"), 0, 8);
//  x2(_T("(?:ab){2,4}?"), _T("ababababab"), 0, 4);
//  x2(_T("(?:ab){,}"), _T("ab{,}"), 0, 5);
//  x2(_T("(?:abc)+?{2}"), _T("abcabcabc"), 0, 6);
//  x2(_T("(?:X*)(?i:xa)"), _T("XXXa"), 0, 4);
  x2(_T("(d+)([^abc]z)"), _T("dddz"), 0, 4);
  x2(_T("([^abc]*)([^abc]z)"), _T("dddz"), 0, 4);
  x2(_T("(\\w+)(\\wz)"), _T("dddz"), 0, 4);
  x3(_T("(a)"), _T("a"), 0, 1, 1);
  x3(_T("(ab)"), _T("ab"), 0, 2, 1);
  x2(_T("((ab))"), _T("ab"), 0, 2);
  x3(_T("((ab))"), _T("ab"), 0, 2, 1);
  x3(_T("((ab))"), _T("ab"), 0, 2, 2);
  x3(_T("((((((((((((((((((((ab))))))))))))))))))))"), _T("ab"), 0, 2, 20);
  x3(_T("(ab)(cd)"), _T("abcd"), 0, 2, 1);
  x3(_T("(ab)(cd)"), _T("abcd"), 2, 4, 2);
  x3(_T("()(a)bc(def)ghijk"), _T("abcdefghijk"), 3, 6, 3);
  x3(_T("(()(a)bc(def)ghijk)"), _T("abcdefghijk"), 3, 6, 4);
//  x2(_T("(^a)"), _T("a"), 0, 1);
  x3(_T("(a)|(a)"), _T("ba"), 1, 2, 1);
//  x3(_T("(^a)|(a)"), _T("ba"), 1, 2, 2);
  x3(_T("(a?)"), _T("aaa"), 0, 1, 1);
  x3(_T("(a*)"), _T("aaa"), 0, 3, 1);
  n(_T("(a*)"), _T(""));
  x3(_T("(a+)"), _T("aaaaaaa"), 0, 7, 1);
  x3(_T("(a+|b*)"), _T("bbbaa"), 0, 3, 1);
  x3(_T("(a+|b?)"), _T("bbbaa"), 0, 1, 1);
  x3(_T("(abc)?"), _T("abc"), 0, 3, 1);
  x3(_T("(abc)*"), _T("abc"), 3, 3, 1);
  x3(_T("(abc)+"), _T("abc"), 0, 3, 1);
  x3(_T("(xyz|abc)+"), _T("abc"), 0, 3, 1);
  x3(_T("([xyz][abc]|abc)+"), _T("abc"), 0, 3, 1);
//  x3(_T("((?i:abc))"), _T("AbC"), 0, 3, 1);
//  x2(_T("(abc)(?i:\\1)"), _T("abcABC"), 0, 6);
//  x3(_T("((?m:a.c))"), _T("a\nc"), 0, 3, 1);
//  x3(_T("((?=az)a)"), _T("azb"), 0, 1, 1);
  x3(_T("abc|(.abd)"), _T("zabd"), 0, 4, 1);
//  x2(_T("(?:abc)|(ABC)"), _T("abc"), 0, 3);
//  x3(_T("(?i:(abc))|(zzz)"), _T("ABC"), 0, 3, 1);
  x3(_T("a*(.)"), _T("aaaaz"), 4, 5, 1);
  x3(_T("a*?(.)"), _T("aaaaz"), 0, 1, 1);
  x3(_T("a*?(c)"), _T("aaaac"), 4, 5, 1);
  x3(_T("[bcd]a*(.)"), _T("caaaaz"), 5, 6, 1);
  //x3(_T("(\\Abb)cc"), _T("bbcc"), 0, 2, 1);
  //n(_T("(\\Abb)cc"), _T("zbbcc"));
  //x3(_T("(^bb)cc"), _T("bbcc"), 0, 2, 1);
  //n(_T("(^bb)cc"), _T("zbbcc"));
  //x3(_T("cc(bb$)"), _T("ccbb"), 2, 4, 1);
  //n(_T("cc(bb$)"), _T("ccbbb"));
  //n(_T("(\\1)"), _T(""));
  //n(_T("\\1(a)"), _T("aa"));
  //n(_T("(a(b)\\1)\\2+"), _T("ababb"));
//  n(_T("(?:(?:\\1|z)(a))+$"), _T("zaa"));
//  x2(_T("(?:(?:\\1|z)(a))+$"), _T("zaaa"), 0, 4);
//  x2(_T("(a)(?=\\1)"), _T("aa"), 0, 1);
  //n(_T("(a)$|\\1"), _T("az"));
  //x2(_T("(a)\\1"), _T("aa"), 0, 2);
  //n(_T("(a)\\1"), _T("ab"));
  //x2(_T("(a?)\\1"), _T("aa"), 0, 2);
  //x2(_T("(a?\?)\\1"), _T("aa"), 0, 0);
  //x2(_T("(a*)\\1"), _T("aaaaa"), 0, 4);
  //x3(_T("(a*)\\1"), _T("aaaaa"), 0, 2, 1);
  //x2(_T("a(b*)\\1"), _T("abbbb"), 0, 5);
  //x2(_T("a(b*)\\1"), _T("ab"), 0, 1);
  //x2(_T("(a*)(b*)\\1\\2"), _T("aaabbaaabb"), 0, 10);
  //x2(_T("(a*)(b*)\\2"), _T("aaabbbb"), 0, 7);
  //x2(_T("(((((((a*)b))))))c\\7"), _T("aaabcaaa"), 0, 8);
  //x3(_T("(((((((a*)b))))))c\\7"), _T("aaabcaaa"), 0, 3, 7);
  //x2(_T("(a)(b)(c)\\2\\1\\3"), _T("abcbac"), 0, 6);
  //x2(_T("([a-d])\\1"), _T("cc"), 0, 2);
  //x2(_T("(\\w\\d\\s)\\1"), _T("f5 f5 "), 0, 6);
  //n(_T("(\\w\\d\\s)\\1"), _T("f5 f5"));
  //x2(_T("(who|[a-c]{3})\\1"), _T("whowho"), 0, 6);
  //x2(_T("...(who|[a-c]{3})\\1"), _T("abcwhowho"), 0, 9);
  //x2(_T("(who|[a-c]{3})\\1"), _T("cbccbc"), 0, 6);
  //x2(_T("(^a)\\1"), _T("aa"), 0, 2);
  //n(_T("(^a)\\1"), _T("baa"));
  //n(_T("(a$)\\1"), _T("aa"));
  //n(_T("(ab\\Z)\\1"), _T("ab"));
  //x2(_T("(a*\\Z)\\1"), _T("a"), 1, 1);
  //x2(_T(".(a*\\Z)\\1"), _T("ba"), 1, 2);
  //x3(_T("(.(abc)\\2)"), _T("zabcabc"), 0, 7, 1);
  //x3(_T("(.(..\\d.)\\2)"), _T("z12341234"), 0, 9, 1);
//  x2(_T("((?i:az))\\1"), _T("AzAz"), 0, 4);
//  n(_T("((?i:az))\\1"), _T("Azaz"));
//  x2(_T("(?<=a)b"), _T("ab"), 1, 2);
//  n(_T("(?<=a)b"), _T("bb"));
//  x2(_T("(?<=a|b)b"), _T("bb"), 1, 2);
//  x2(_T("(?<=a|bc)b"), _T("bcb"), 2, 3);
//  x2(_T("(?<=a|bc)b"), _T("ab"), 1, 2);
//  x2(_T("(?<=a|bc||defghij|klmnopq|r)z"), _T("rz"), 1, 2);
  //x2(_T("(a)\\g<1>"), _T("aa"), 0, 2);
//  x2(_T("(?<!a)b"), _T("cb"), 1, 2);
//  n(_T("(?<!a)b"), _T("ab"));
//  x2(_T("(?<!a|bc)b"), _T("bbb"), 0, 1);
//  n(_T("(?<!a|bc)z"), _T("bcz"));
//  x2(_T("(?<name1>a)"), _T("a"), 0, 1);
//  x2(_T("(?<name_2>ab)\\g<name_2>"), _T("abab"), 0, 4);
//  x2(_T("(?<name_3>.zv.)\\k<name_3>"), _T("azvbazvb"), 0, 8);
//  x2(_T("(?<=\\g<ab>)|-\\zEND (?<ab>XyZ)"), _T("XyZ"), 3, 3);
//  x2(_T("(?<n>|a\\g<n>)+"), _T(""), 0, 0);
//  x2(_T("(?<n>|\\(\\g<n>\\))+$"), _T("()(())"), 0, 6);
//  x3(_T("\\g<n>(?<n>.){0}"), _T("X"), 0, 1, 1);
//  x2(_T("\\g<n>(abc|df(?<n>.YZ){2,8}){0}"), _T("XYZ"), 0, 3);
//  x2(_T("\\A(?<n>(a\\g<n>)|)\\z"), _T("aaaa"), 0, 4);
//  x2(_T("(?<n>|\\g<m>\\g<n>)\\z|\\zEND (?<m>a|(b)\\g<m>)"), _T("bbbbabba"), 0, 8);
//  x2(_T("(?<name1240>\\w+\\sx)a+\\k<name1240>"), _T("  fg xaaaaaaaafg x"), 2, 18);
//  x3(_T("(z)()()(?<_9>a)\\g<_9>"), _T("zaa"), 2, 3, 1);
//  x2(_T("(.)(((?<_>a)))\\k<_>"), _T("zaa"), 0, 3);
//  x2(_T("((?<name1>\\d)|(?<name2>\\w))(\\k<name1>|\\k<name2>)"), _T("ff"), 0, 2);
//  x2(_T("(?:(?<x>)|(?<x>efg))\\k<x>"), _T(""), 0, 0);
//  x2(_T("(?:(?<x>abc)|(?<x>efg))\\k<x>"), _T("abcefgefg"), 3, 9);
//  n(_T("(?:(?<x>abc)|(?<x>efg))\\k<x>"), _T("abcefg"));
//  x2(_T("(?:(?<n1>.)|(?<n1>..)|(?<n1>...)|(?<n1>....)|(?<n1>.....)|(?<n1>......)|(?<n1>.......)|(?<n1>........)|(?<n1>.........)|(?<n1>..........)|(?<n1>...........)|(?<n1>............)|(?<n1>......//.......)|(?<n1>..............))\\k<n1>$"), _T("a-pyumpyum"), 2, 10);
//  x3(_T("(?:(?<n1>.)|(?<n1>..)|(?<n1>...)|(?<n1>....)|(?<n1>.....)|(?<n1>......)|(?<n1>.......)|(?<n1>........)|(?<n1>.........)|(?<n1>..........)|(?<n1>...........)|(?<n1>............)|(?<n1>......//.......)|(?<n1>..............))\\k<n1>$"), _T("xxxxabcdefghijklmnabcdefghijklmn"), 4, 18, 14);
//  x3(_T("(?<name1>)(?<name2>)(?<name3>)(?<name4>)(?<name5>)(?<name6>)(?<name7>)(?<name8>)(?<name9>)(?<name10>)(?<name11>)(?<name12>)(?<name13>)(?<name14>)(?<name15>)(?<name16>aaa)(?<name17>)$"), _T("aaa"), 0, 3, 16);
//  x2(_T("(?<foo>a|\\(\\g<foo>\\))"), _T("a"), 0, 1);
//  x2(_T("(?<foo>a|\\(\\g<foo>\\))"), _T("((((((a))))))"), 0, 13);
//  x3(_T("(?<foo>a|\\(\\g<foo>\\))"), _T("((((((((a))))))))"), 0, 17, 1);
//  x2(_T("\\g<bar>|\\zEND(?<bar>.*abc$)"), _T("abcxxxabc"), 0, 9);
  //x2(_T("\\g<1>|\\zEND(.a.)"), _T("bac"), 0, 3);
//  x3(_T("\\g<_A>\\g<_A>|\\zEND(.a.)(?<_A>.b.)"), _T("xbxyby"), 3, 6, 1);
//  x2(_T("\\A(?:\\g<pon>|\\g<pan>|\\zEND  (?<pan>a|c\\g<pon>c)(?<pon>b|d\\g<pan>d))$"), _T("cdcbcdc"), 0, 7);
//  x2(_T("\\A(?<n>|a\\g<m>)\\z|\\zEND (?<m>\\g<n>)"), _T("aaaa"), 0, 4);
//  x2(_T("(?<n>(a|b\\g<n>c){3,5})"), _T("baaaaca"), 1, 5);
//  x2(_T("(?<n>(a|b\\g<n>c){3,5})"), _T("baaaacaaaaa"), 0, 10);
//  x2(_T("(?<pare>\\(([^\\(\\)]++|\\g<pare>)*+\\))"), _T("((a))"), 0, 5);
  //n(_T("()*\\1"), _T(""));
//  x2(_T("(?:()|())*\\1\\2"), _T(""), 0, 0);
  x3(_T("(?:\\1a|())*"), _T("a"), 0, 0, 1);			// クラッシュするパターン
  x2(_T("x((.)*)*x"), _T("0x1x2x3"), 1, 6);			// クラッシュするパターン
  x2(_T("x((.)*)*x(?i:\\1)\\Z"), _T("0x1x2x1X2"), 1, 9);// クラッシュするパターン
//  x2(_T("(?:()|()|()|()|()|())*\\2\\5"), _T(""), 0, 0);
  x2(_T("(?:()|()|()|(x)|()|())*\\2b\\5"), _T("b"), 0, 1);// クラッシュするパターン
  x2(_T("\\xED\\xF2"), _T("\xed\xf2"), 0, 2);
  x2(_T(""), _T("あ"), 0, 0);
  x2(_T("あ"), _T("あ"), 0, 1);
  n(_T("い"), _T("あ"));
  x2(_T("うう"), _T("うう"), 0, 2);
  x2(_T("あいう"), _T("あいう"), 0, 3);
  x2(_T("こここここここここここここここここここここここここここここここここここ"), _T("こここここここここここここここここここここここここここここここここここ"), 0, 35);
  x2(_T("あ"), _T("いあ"), 1, 2);
  x2(_T("いう"), _T("あいう"), 1, 3);
  x2(_T("\\ucab8"), _T("\ucab8"), 0, 1);
  x2(_T("."), _T("あ"), 0, 1);
  x2(_T(".."), _T("かき"), 0, 2);
  n(_T("\\w"), _T("お"));
  x2(_T("\\W"), _T("あ"), 0 ,1 );
  x2(_T("[\\W]"), _T("う$"), 0, 1);
  x2(_T("\\S"), _T("そ"), 0, 1);
  x2(_T("\\S"), _T("漢"), 0, 1);
  n(_T("\\b"), _T("気 "));
  n(_T("\\b"), _T(" ほ"));
  n(_T("\\B"), _T("せそ "));
  n(_T("\\B"), _T("う "));
  n(_T("\\B"), _T(" い"));
  x2(_T("[たち]"), _T("ち"), 0, 1);
  n(_T("[なに]"), _T("ぬ"));
  x2(_T("[う-お]"), _T("え"), 0, 1);
  n(_T("[^け]"), _T("け"));
  n(_T("[\\w]"), _T("ね"));
  n(_T("[\\d]"), _T("ふ"));
  x2(_T("[\\D]"), _T("は"), 0, 1);
  n(_T("[\\s]"), _T("く"));
  x2(_T("[\\S]"), _T("へ"), 0, 1);
  n(_T("[\\w\\d]"), _T("よ"));
  n(_T("[\\w\\d]"), _T("   よ"));
  n(_T("\\w鬼車"), _T(" 鬼車"));
  x2(_T("鬼\\W車"), _T("鬼 車"), 0, 3);
  x2(_T("あ.い.う"), _T("ああいいう"), 0, 5);
  n(_T(".\\wう\\W..ぞ"), _T("えうう うぞぞ"));
  x2(_T("\\s\\wこここ"), _T(" aこここ"), 0, 5);
  x2(_T("ああ.け"), _T("ああけけ"), 0, 4);
  n(_T(".い"), _T("いえ"));
  x2(_T(".お"), _T("おお"), 0, 2);
  x2(_T("^あ"), _T("あ"), 0, 1);
  x2(_T("^む$"), _T("む"), 0, 1);
  x2(_T("^む$"), _T("む\n"), 0, 1);
  n(_T("^\\w$"), _T("に"));
  x2(_T("^\\wかきくけこ$"), _T("zかきくけこ"), 0, 6);
  x2(_T("^\\w...うえお$"), _T("zあいううえお"), 0, 7);
  n(_T("\\w\\w\\s\\Wおおお\\d"), _T("aお  おおお4"));
//  x2(_T("\\Aたちつ"), _T("たちつ"), 0, 6);				// \Aは未対応
//  x2(_T("むめも\\Z"), _T("むめも"), 0, 6);				// \Zは未対応
//  x2(_T("かきく\\z"), _T("かきく"), 0, 6);				// \Zは未対応
//  x2(_T("かきく\\Z"), _T("かきく\n"), 0, 6);				// \Zは未対応
  //x2(_T("\\Gぽぴ"), _T("ぽぴ"), 0, 4);					// \Gは未対応
  //n(_T("\\Gえ"), _T("うえお"));					// \Gは未対応
  //n(_T("とて\\G"), _T("とて"));					// \Gは未対応
  //n(_T("まみ\\A"), _T("まみ"));					// \Aは未対応
  //n(_T("ま\\Aみ"), _T("まみ"));					// \Aは未対応
//  //x2(_T("(?=せ)せ"), _T("せ"), 0, 2);				// (?...は未対応
//  //n(_T("(?=う)."), _T("い"));
//  //x2(_T("(?!う)か"), _T("か"), 0, 2);
//  //n(_T("(?!と)あ"), _T("と"));
//  //x2(_T("(?i:あ)"), _T("あ"), 0, 2);
//  //x2(_T("(?i:ぶべ)"), _T("ぶべ"), 0, 4);
//  //n(_T("(?i:い)"), _T("う"));
//  //x2(_T("(?m:よ.)"), _T("よ\n"), 0, 3);
//  //x2(_T("(?m:.め)"), _T("ま\nめ"), 2, 5);
  n(_T("あ?"), _T(""));
  x2(_T("変?"), _T("化"), 0, 0);
  x2(_T("変?"), _T("変"), 0, 1);
  n(_T("量*"), _T(""));
  x2(_T("量*"), _T("量"), 0, 1);
  x2(_T("子*"), _T("子子子"), 0, 3);
  x2(_T("馬*"), _T("鹿馬馬馬馬"), 0, 0);
  n(_T("山+"), _T(""));
  x2(_T("河+"), _T("河"), 0, 1);
  x2(_T("時+"), _T("時時時時"), 0, 4);
  x2(_T("え+"), _T("ええううう"), 0, 2);
  x2(_T("う+"), _T("おうううう"), 1, 5);
  x2(_T(".?"), _T("た"), 0, 1);
  x2(_T(".*"), _T("ぱぴぷぺ"), 0, 4);
  x2(_T(".+"), _T("ろ"), 0, 1);
  x2(_T(".+"), _T("いうえか\n"), 0, 4);
  x2(_T("あ|い"), _T("あ"), 0, 1);
  x2(_T("あ|い"), _T("い"), 0, 1);
  x2(_T("あい|いう"), _T("あい"), 0, 2);
  x2(_T("あい|いう"), _T("いう"), 0, 2);
//  //x2(_T("を(?:かき|きく)"), _T("をかき"), 0, 6);
//  //x2(_T("を(?:かき|きく)け"), _T("をきくけ"), 0, 8);
//  //x2(_T("あい|(?:あう|あを)"), _T("あを"), 0, 4);
  x2(_T("あ|い|う"), _T("えう"), 1, 2);
  x2(_T("あ|い|うえ|おかき|く|けこさ|しすせ|そ|たち|つてとなに|ぬね"), _T("しすせ"), 0, 3);
  n(_T("あ|い|うえ|おかき|く|けこさ|しすせ|そ|たち|つてとなに|ぬね"), _T("すせ"));
//  x2(_T("あ|^わ"), _T("ぶあ"), 1, 2);			// |と^の組み合わせに難あり
  x2(_T("あ|^を"), _T("をあ"), 0, 1);
  //x2(_T("鬼|\\G車"), _T("け車鬼"), 2, 3);
  //x2(_T("鬼|\\G車"), _T("車鬼"), 0, 1);
  //x2(_T("鬼|\\A車"), _T("b車鬼"), 3, 5);
  //x2(_T("鬼|\\A車"), _T("車"), 0, 2);
  //x2(_T("鬼|車\\Z"), _T("車鬼"), 2, 4);
  //x2(_T("鬼|車\\Z"), _T("車"), 0, 2);
  //x2(_T("鬼|車\\Z"), _T("車\n"), 0, 2);
  //x2(_T("鬼|車\\z"), _T("車鬼"), 2, 4);
  //x2(_T("鬼|車\\z"), _T("車"), 0, 2);
  n(_T("\\w|\\s"), _T("お"));
  x2(_T("\\w|%"), _T("%お"), 0, 1);
  x2(_T("\\w|[&$]"), _T("う&"), 1, 2);
  x2(_T("[い-け]"), _T("う"), 0, 1);
  x2(_T("[い-け]|[^か-こ]"), _T("あ"), 0, 1);
  x2(_T("[い-け]|[^か-こ]"), _T("か"), 0, 1);
  x2(_T("[^あ]"), _T("\n"), 0, 1);
//  x2(_T("(?:あ|[う-き])|いを"), _T("うを"), 0, 2);
//  x2(_T("(?:あ|[う-き])|いを"), _T("いを"), 0, 4);
//  x2(_T("あいう|(?=けけ)..ほ"), _T("けけほ"), 0, 6);
//  x2(_T("あいう|(?!けけ)..ほ"), _T("あいほ"), 0, 6);
//  x2(_T("(?=をあ)..あ|(?=をを)..あ"), _T("ををあ"), 0, 6);
//  x2(_T("(?<=あ|いう)い"), _T("いうい"), 4, 6);
//  n(_T("(?>あ|あいえ)う"), _T("あいえう"));
//  x2(_T("(?>あいえ|あ)う"), _T("あいえう"), 0, 8);
  x2(_T("あ?|い"), _T("あ"), 0, 1);
  x2(_T("あ?|い"), _T("い"), 0, 0);
  n(_T("あ?|い"), _T(""));
  x2(_T("あ*|い"), _T("ああ"), 0, 2);
  x2(_T("あ*|い*"), _T("いあ"), 0, 0);
  x2(_T("あ*|い*"), _T("あい"), 0, 1);
  x2(_T("[aあ]*|い*"), _T("aあいいい"), 0, 2);
  n(_T("あ+|い*"), _T(""));
  x2(_T("あ+|い*"), _T("いいい"), 0, 3);
  x2(_T("あ+|い*"), _T("あいいい"), 0, 1);
  x2(_T("あ+|い*"), _T("aあいいい"), 0, 0);
  n(_T("あ+|い+"), _T(""));
  x2(_T("(あ|い)?"), _T("い"), 0, 1);
  x2(_T("(あ|い)*"), _T("いあ"), 0, 2);
  x2(_T("(あ|い)+"), _T("いあい"), 0, 3);
  x2(_T("(あい|うあ)+"), _T("うああいうえ"), 0, 4);
  x2(_T("(あい|うえ)+"), _T("うああいうえ"), 2, 6);
  x2(_T("(あい|うあ)+"), _T("ああいうあ"), 1, 5);
  x2(_T("(あい|うあ)+"), _T("あいをうあ"), 0, 2);
  x2(_T("(あい|うあ)+"), _T("$$zzzzあいをうあ"), 6, 8);
  x2(_T("(あ|いあい)+"), _T("あいあいあ"), 0, 5);
  x2(_T("(あ|いあい)+"), _T("いあ"), 1, 2);
  x2(_T("(あ|いあい)+"), _T("いあああいあ"), 1, 4);
//  x2(_T("(?:あ|い)(?:あ|い)"), _T("あい"), 0, 4);
//  x2(_T("(?:あ*|い*)(?:あ*|い*)"), _T("あああいいい"), 0, 6);
//  x2(_T("(?:あ*|い*)(?:あ+|い+)"), _T("あああいいい"), 0, 12);
//  x2(_T("(?:あ+|い+){2}"), _T("あああいいい"), 0, 12);
//  x2(_T("(?:あ+|い+){1,2}"), _T("あああいいい"), 0, 12);
//  x2(_T("(?:あ+|\\Aい*)うう"), _T("うう"), 0, 4);
//  n(_T("(?:あ+|\\Aい*)うう"), _T("あいうう"));
//  x2(_T("(?:^あ+|い+)*う"), _T("ああいいいあいう"), 12, 16);
//  x2(_T("(?:^あ+|い+)*う"), _T("ああいいいいう"), 0, 14);
  x2(_T("う{0,}"), _T("うううう"), 0, 4);
//  x2(_T("あ|(?i)c"), _T("C"), 0, 1);
//  x2(_T("(?i)c|あ"), _T("C"), 0, 1);
//  x2(_T("(?i:あ)|a"), _T("a"), 0, 1);
//  n(_T("(?i:あ)|a"), _T("A"));
  x2(_T("[あいう]?"), _T("あいう"), 0, 1);
  x2(_T("[あいう]*"), _T("あいう"), 0, 3);
  x2(_T("[^あいう]*"), _T("あいう"),0,0 );
  n(_T("[^あいう]+"), _T("あいう"));
  x2(_T("あ??"), _T("あああ"), 0, 0);
  x2(_T("いあ??い"), _T("いあい"), 0, 3);
  x2(_T("あ*?"), _T("あああ"), 0, 0);
  x2(_T("いあ*?"), _T("いああ"), 0, 1);
  x2(_T("いあ*?い"), _T("いああい"), 0, 4);
  x2(_T("あ+?"), _T("あああ"), 0, 1);
  x2(_T("いあ+?"), _T("いああ"), 0, 2);
  x2(_T("いあ+?い"), _T("いああい"), 0, 4);
//  x2(_T("(?:天?)?\?"), _T("天"), 0, 0);
//  x2(_T("(?:天?\?)?"), _T("天"), 0, 0);
//  x2(_T("(?:夢?)+?"), _T("夢夢夢"), 0, 2);
//  x2(_T("(?:風+)?\?"), _T("風風風"), 0, 0);
//  x2(_T("(?:雪+)?\?霜"), _T("雪雪雪霜"), 0, 8);
//  x2(_T("(?:あい)?{2}"), _T(""), 0, 0);
//  x2(_T("(?:鬼車)?{2}"), _T("鬼車鬼車鬼"), 0, 8);
//  x2(_T("(?:鬼車)*{0}"), _T("鬼車鬼車鬼"), 0, 0);
//  x2(_T("(?:鬼車){3,}"), _T("鬼車鬼車鬼車鬼車"), 0, 16);
//  n(_T("(?:鬼車){3,}"), _T("鬼車鬼車"));
//  x2(_T("(?:鬼車){2,4}"), _T("鬼車鬼車鬼車"), 0, 12);
//  x2(_T("(?:鬼車){2,4}"), _T("鬼車鬼車鬼車鬼車鬼車"), 0, 16);
//  x2(_T("(?:鬼車){2,4}?"), _T("鬼車鬼車鬼車鬼車鬼車"), 0, 8);
//  x2(_T("(?:鬼車){,}"), _T("鬼車{,}"), 0, 7);
//  x2(_T("(?:かきく)+?{2}"), _T("かきくかきくかきく"), 0, 12);
  x3(_T("(火)"), _T("火"), 0, 1, 1);
  x3(_T("(火水)"), _T("火水"), 0, 2, 1);
  x2(_T("((時間))"), _T("時間"), 0, 2);
  x3(_T("((風水))"), _T("風水"), 0, 2, 1);
  x3(_T("((昨日))"), _T("昨日"), 0, 2, 2);
  x3(_T("((((((((((((((((((((量子))))))))))))))))))))"), _T("量子"), 0, 2, 20);
  x3(_T("(あい)(うえ)"), _T("あいうえ"), 0, 2, 1);
  x3(_T("(あい)(うえ)"), _T("あいうえ"), 2, 4, 2);
  x3(_T("()(あ)いう(えおか)きくけこ"), _T("あいうえおかきくけこ"), 3, 6, 3);
  x3(_T("(()(あ)いう(えおか)きくけこ)"), _T("あいうえおかきくけこ"), 3, 6, 4);
  x3(_T(".*(フォ)ン・マ(ン()シュタ)イン"), _T("フォン・マンシュタイン"), 5, 9, 2);
//  x2(_T("(^あ)"), _T("あ"), 0, 1);			// ^の処理に難あり
  x3(_T("(あ)|(あ)"), _T("いあ"), 1, 2, 1);
  x3(_T("(^あ)|(あ)"), _T("いあ"), 1, 2, 2);
  x3(_T("(あ?)"), _T("あああ"), 0, 1, 1);
  x3(_T("(ま*)"), _T("ままま"), 0, 3, 1);
  n(_T("(と*)"), _T(""));
  x3(_T("(る+)"), _T("るるるるるるる"), 0, 7, 1);
  x3(_T("(ふ+|へ*)"), _T("ふふふへへ"), 0, 3, 1);
  x3(_T("(あ+|い?)"), _T("いいいああ"), 0, 1, 1);
  x3(_T("(あいう)?"), _T("あいう"), 0, 3, 1);
  x3(_T("(あいう)*"), _T("あいう"), 3, 3, 1);	// *の処理に難あり
  x3(_T("(あいう)+"), _T("あいう"), 0, 3, 1);
  x3(_T("(さしす|あいう)+"), _T("あいう"), 0, 3, 1);
  x3(_T("([なにぬ][かきく]|かきく)+"), _T("かきく"), 0, 3, 1);
//  x3(_T("((?i:あいう))"), _T("あいう"), 0, 6, 1);
//  x3(_T("((?m:あ.う))"), _T("あ\nう"), 0, 5, 1);
//  x3(_T("((?=あん)あ)"), _T("あんい"), 0, 2, 1);
  x3(_T("あいう|(.あいえ)"), _T("んあいえ"), 0, 4, 1);
  x3(_T("あ*(.)"), _T("ああああん"), 4, 5, 1);
  x3(_T("あ*?(.)"), _T("ああああん"), 0, 1, 1);
  x3(_T("あ*?(ん)"), _T("ああああん"), 4, 5, 1);
  x3(_T("[いうえ]あ*(.)"), _T("えああああん"), 5, 6, 1);
  //x3(_T("(\\Aいい)うう"), _T("いいうう"), 0, 2, 1);
  //n(_T("(\\Aいい)うう"), _T("んいいうう"));
  //x3(_T("(^いい)うう"), _T("いいうう"), 0, 2, 1);		// ^の処理に難あり
  //n(_T("(^いい)うう"), _T("んいいうう"));
  //x3(_T("ろろ(るる$)"), _T("ろろるる"), 2, 4, 1);		// ()の中の^$の処理に難あり
  //n(_T("ろろ(るる$)"), _T("ろろるるる"));
  //x2(_T("(無)\\1"), _T("無無"), 0, 2);			// \1,\2...は未対応
  //n(_T("(無)\\1"), _T("無武"));
  //x2(_T("(空?)\\1"), _T("空空"), 0, 2);
  //x2(_T("(空?\?)\\1"), _T("空空"), 0, 0);
  //x2(_T("(空*)\\1"), _T("空空空空空"), 0, 4);
  //x3(_T("(空*)\\1"), _T("空空空空空"), 0, 2, 1);
  //x2(_T("あ(い*)\\1"), _T("あいいいい"), 0, 5);
  //x2(_T("あ(い*)\\1"), _T("あい"), 0, 1);
  //x2(_T("(あ*)(い*)\\1\\2"), _T("あああいいあああいい"), 0, 10);
  //x2(_T("(あ*)(い*)\\2"), _T("あああいいいい"), 0, 7);
  //x3(_T("(あ*)(い*)\\2"), _T("あああいいいい"), 3, 5, 2);
  //x2(_T("(((((((ぽ*)ぺ))))))ぴ\\7"), _T("ぽぽぽぺぴぽぽぽ"), 0, 16);
  //x3(_T("(((((((ぽ*)ぺ))))))ぴ\\7"), _T("ぽぽぽぺぴぽぽぽ"), 0, 6, 7);
  //x2(_T("(は)(ひ)(ふ)\\2\\1\\3"), _T("はひふひはふ"), 0, 12);
  //x2(_T("([き-け])\\1"), _T("くく"), 0, 4);
  //x2(_T("(\\w\\d\\s)\\1"), _T("あ5 あ5 "), 0, 8);
  //n(_T("(\\w\\d\\s)\\1"), _T("あ5 あ5"));
  //x2(_T("(誰？|[あ-う]{3})\\1"), _T("誰？誰？"), 0, 8);
  //x2(_T("...(誰？|[あ-う]{3})\\1"), _T("あaあ誰？誰？"), 0, 13);
  //x2(_T("(誰？|[あ-う]{3})\\1"), _T("ういうういう"), 0, 12);
  //x2(_T("(^こ)\\1"), _T("ここ"), 0, 4);
  //n(_T("(^む)\\1"), _T("めむむ"));
  //n(_T("(あ$)\\1"), _T("ああ"));
  //n(_T("(あい\\Z)\\1"), _T("あい"));
  //x2(_T("(あ*\\Z)\\1"), _T("あ"), 2, 2);
  //x2(_T(".(あ*\\Z)\\1"), _T("いあ"), 2, 4);
  //x3(_T("(.(やいゆ)\\2)"), _T("zやいゆやいゆ"), 0, 13, 1);
  //x3(_T("(.(..\\d.)\\2)"), _T("あ12341234"), 0, 10, 1);
//  x2(_T("((?i:あvず))\\1"), _T("あvずあvず"), 0, 10);
//  x2(_T("(?<愚か>変|\\(\\g<愚か>\\))"), _T("((((((変))))))"), 0, 14);
//  x2(_T("\\A(?:\\g<阿_1>|\\g<云_2>|\\z終了  (?<阿_1>観|自\\g<云_2>自)(?<云_2>在|菩薩\\g<阿_1>菩薩))$"), _T("菩薩自菩薩自在自菩薩自菩薩"), 0, 26);
  //x2(_T("[[ひふ]]"), _T("ふ"), 0, 1);			// [[]]のネストは難あり
  //x2(_T("[[いおう]か]"), _T("か"), 0, 1);
  //n(_T("[[^あ]]"), _T("あ"));
  //n(_T("[^[あ]]"), _T("あ"));
  //x2(_T("[^[^あ]]"), _T("あ"), 0, 2);
  //x2(_T("[[かきく]&&きく]"), _T("く"), 0, 2);
  //n(_T("[[かきく]&&きく]"), _T("か"));
  //n(_T("[[かきく]&&きく]"), _T("け"));
  x2(_T("[あ-ん&&い-を&&う-ゑ]"), _T("ゑ"), 0, 1);
  n(_T("[^あ-ん&&い-を&&う-ゑ]"), _T("ゑ"));
  //x2(_T("[[^あ&&あ]&&あ-ん]"), _T("い"), 0, 1);
  //n(_T("[[^あ&&あ]&&あ-ん]"), _T("あ"));
  //x2(_T("[[^あ-ん&&いうえお]&&[^う-か]]"), _T("き"), 0, 1);
  //n(_T("[[^あ-ん&&いうえお]&&[^う-か]]"), _T("い"));
  //x2(_T("[^[^あいう]&&[^うえお]]"), _T("う"), 0, 2);
  //x2(_T("[^[^あいう]&&[^うえお]]"), _T("え"), 0, 2);
  //n(_T("[^[^あいう]&&[^うえお]]"), _T("か"));
  x2(_T("[あ-&&-あ]"), _T("-"), 0, 1);
  //x2(_T("[^[^a-zあいう]&&[^bcdefgうえお]q-w]"), _T("え"), 0, 2);
  //x2(_T("[^[^a-zあいう]&&[^bcdefgうえお]g-w]"), _T("f"), 0, 1);
  //x2(_T("[^[^a-zあいう]&&[^bcdefgうえお]g-w]"), _T("g"), 0, 1);
  //n(_T("[^[^a-zあいう]&&[^bcdefgうえお]g-w]"), _T("2"));
  x2(_T("a<b>バージョンのダウンロード<\\/b>"), _T("a<b>バージョンのダウンロード</b>"), 0, 20);
  x2(_T(".<b>バージョンのダウンロード<\\/b>"), _T("a<b>バージョンのダウンロード</b>"), 0, 20);

#endif
  _ftprintf(stdout,
       _T("\nRESULT   SUCC: %d,  FAIL: %d,  ERROR: %d\n"),
       nsucc, nfail, nerror);


  return ((nfail == 0 && nerror == 0) ? 0 : -1);
}


